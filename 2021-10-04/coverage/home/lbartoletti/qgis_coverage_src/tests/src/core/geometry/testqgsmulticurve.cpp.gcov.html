<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info.cleaned - /home/lbartoletti/qgis_coverage_src/tests/src/core/geometry/testqgsmulticurve.cpp</title>
  <link rel="stylesheet" type="text/css" href="../../../../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../../../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../../../../index.html">top level</a> - <a href="index.html">home/lbartoletti/qgis_coverage_src/tests/src/core/geometry</a> - testqgsmulticurve.cpp<span style="font-size: 80%;"> (source / <a href="testqgsmulticurve.cpp.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info.cleaned</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">531</td>
            <td class="headerCovTableEntry">531</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2021-10-04 07:08:52</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntryHi">-</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td class="headerItem">Branches:</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntryHi">-</td>
          </tr>
          <tr><td><img src="../../../../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">           Branch data     Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>                :            : /***************************************************************************</a>
<a name="2"><span class="lineNum">       2 </span>                :            :      testqgsmulticurve.cpp</a>
<a name="3"><span class="lineNum">       3 </span>                :            :      --------------------------------------</a>
<a name="4"><span class="lineNum">       4 </span>                :            :     Date                 : August 2021</a>
<a name="5"><span class="lineNum">       5 </span>                :            :     Copyright            : (C) 2021 by Lo√Øc Bartoletti</a>
<a name="6"><span class="lineNum">       6 </span>                :            :     Email                : loic dot bartoletti at oslandia dot com</a>
<a name="7"><span class="lineNum">       7 </span>                :            :  ***************************************************************************</a>
<a name="8"><span class="lineNum">       8 </span>                :            :  *                                                                         *</a>
<a name="9"><span class="lineNum">       9 </span>                :            :  *   This program is free software; you can redistribute it and/or modify  *</a>
<a name="10"><span class="lineNum">      10 </span>                :            :  *   it under the terms of the GNU General Public License as published by  *</a>
<a name="11"><span class="lineNum">      11 </span>                :            :  *   the Free Software Foundation; either version 2 of the License, or     *</a>
<a name="12"><span class="lineNum">      12 </span>                :            :  *   (at your option) any later version.                                   *</a>
<a name="13"><span class="lineNum">      13 </span>                :            :  *                                                                         *</a>
<a name="14"><span class="lineNum">      14 </span>                :            :  ***************************************************************************/</a>
<a name="15"><span class="lineNum">      15 </span>                :            : #include &quot;qgstest.h&quot;</a>
<a name="16"><span class="lineNum">      16 </span>                :            : #include &lt;QObject&gt;</a>
<a name="17"><span class="lineNum">      17 </span>                :            : #include &lt;QString&gt;</a>
<a name="18"><span class="lineNum">      18 </span>                :            : </a>
<a name="19"><span class="lineNum">      19 </span>                :            : #include &quot;qgscircularstring.h&quot;</a>
<a name="20"><span class="lineNum">      20 </span>                :            : #include &quot;qgsgeometryutils.h&quot;</a>
<a name="21"><span class="lineNum">      21 </span>                :            : #include &quot;qgslinestring.h&quot;</a>
<a name="22"><span class="lineNum">      22 </span>                :            : #include &quot;qgsmulticurve.h&quot;</a>
<a name="23"><span class="lineNum">      23 </span>                :            : #include &quot;qgsmultilinestring.h&quot;</a>
<a name="24"><span class="lineNum">      24 </span>                :            : #include &quot;qgsmultipoint.h&quot;</a>
<a name="25"><span class="lineNum">      25 </span>                :            : #include &quot;qgspoint.h&quot;</a>
<a name="26"><span class="lineNum">      26 </span>                :            : </a>
<a name="27"><span class="lineNum">      27 </span>                :            : #include &quot;testgeometryutils.h&quot;</a>
<a name="28"><span class="lineNum">      28 </span>                :            : </a>
<a name="29"><span class="lineNum">      29 </span>                :<span class="lineCov">          2 : class TestQgsMultiCurve: public QObject</span></a>
<a name="30"><span class="lineNum">      30 </span>                :            : {</a>
<a name="31"><span class="lineNum">      31 </span>                :            :     Q_OBJECT</a>
<a name="32"><span class="lineNum">      32 </span>                :            :   private slots:</a>
<a name="33"><span class="lineNum">      33 </span>                :            :     void multiCurve();</a>
<a name="34"><span class="lineNum">      34 </span>                :            : };</a>
<a name="35"><span class="lineNum">      35 </span>                :            : </a>
<a name="36"><span class="lineNum">      36 </span>                :<span class="lineCov">          1 : void TestQgsMultiCurve::multiCurve()</span></a>
<a name="37"><span class="lineNum">      37 </span>                :            : {</a>
<a name="38"><span class="lineNum">      38 </span>                :            :   //test constructor</a>
<a name="39"><span class="lineNum">      39 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c1;</span></a>
<a name="40"><span class="lineNum">      40 </span>                :<span class="lineCov">          1 :   QVERIFY( c1.isEmpty() );</span></a>
<a name="41"><span class="lineNum">      41 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.nCoordinates(), 0 );</span></a>
<a name="42"><span class="lineNum">      42 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.ringCount(), 0 );</span></a>
<a name="43"><span class="lineNum">      43 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.partCount(), 0 );</span></a>
<a name="44"><span class="lineNum">      44 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.is3D() );</span></a>
<a name="45"><span class="lineNum">      45 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.isMeasure() );</span></a>
<a name="46"><span class="lineNum">      46 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="47"><span class="lineNum">      47 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.wktTypeStr(), QString( &quot;MultiCurve&quot; ) );</span></a>
<a name="48"><span class="lineNum">      48 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.geometryType(), QString( &quot;MultiCurve&quot; ) );</span></a>
<a name="49"><span class="lineNum">      49 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.dimension(), 0 );</span></a>
<a name="50"><span class="lineNum">      50 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.hasCurvedSegments() );</span></a>
<a name="51"><span class="lineNum">      51 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.area(), 0.0 );</span></a>
<a name="52"><span class="lineNum">      52 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.perimeter(), 0.0 );</span></a>
<a name="53"><span class="lineNum">      53 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.numGeometries(), 0 );</span></a>
<a name="54"><span class="lineNum">      54 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( 0 ) );</span></a>
<a name="55"><span class="lineNum">      55 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( -1 ) );</span></a>
<a name="56"><span class="lineNum">      56 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.vertexCount( 0, 0 ), 0 );</span></a>
<a name="57"><span class="lineNum">      57 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.vertexCount( 0, 1 ), 0 );</span></a>
<a name="58"><span class="lineNum">      58 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.vertexCount( 1, 0 ), 0 );</span></a>
<a name="59"><span class="lineNum">      59 </span>                :            : </a>
<a name="60"><span class="lineNum">      60 </span>                :            :   //addGeometry</a>
<a name="61"><span class="lineNum">      61 </span>                :            :   //try with nullptr</a>
<a name="62"><span class="lineNum">      62 </span>                :<span class="lineCov">          1 :   c1.addGeometry( nullptr );</span></a>
<a name="63"><span class="lineNum">      63 </span>                :<span class="lineCov">          1 :   QVERIFY( c1.isEmpty() );</span></a>
<a name="64"><span class="lineNum">      64 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.nCoordinates(), 0 );</span></a>
<a name="65"><span class="lineNum">      65 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.ringCount(), 0 );</span></a>
<a name="66"><span class="lineNum">      66 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.partCount(), 0 );</span></a>
<a name="67"><span class="lineNum">      67 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.numGeometries(), 0 );</span></a>
<a name="68"><span class="lineNum">      68 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="69"><span class="lineNum">      69 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( 0 ) );</span></a>
<a name="70"><span class="lineNum">      70 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( -1 ) );</span></a>
<a name="71"><span class="lineNum">      71 </span>                :            : </a>
<a name="72"><span class="lineNum">      72 </span>                :            :   // not a curve</a>
<a name="73"><span class="lineNum">      73 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.addGeometry( new QgsPoint() ) );</span></a>
<a name="74"><span class="lineNum">      74 </span>                :<span class="lineCov">          1 :   QVERIFY( c1.isEmpty() );</span></a>
<a name="75"><span class="lineNum">      75 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.nCoordinates(), 0 );</span></a>
<a name="76"><span class="lineNum">      76 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.ringCount(), 0 );</span></a>
<a name="77"><span class="lineNum">      77 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.partCount(), 0 );</span></a>
<a name="78"><span class="lineNum">      78 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.numGeometries(), 0 );</span></a>
<a name="79"><span class="lineNum">      79 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="80"><span class="lineNum">      80 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( 0 ) );</span></a>
<a name="81"><span class="lineNum">      81 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( -1 ) );</span></a>
<a name="82"><span class="lineNum">      82 </span>                :            : </a>
<a name="83"><span class="lineNum">      83 </span>                :            :   //valid geometry</a>
<a name="84"><span class="lineNum">      84 </span>                :<span class="lineCov">          1 :   QgsCircularString part;</span></a>
<a name="85"><span class="lineNum">      85 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 1, 10 ) &lt;&lt; QgsPoint( 2, 11 ) &lt;&lt; QgsPoint( 1, 12 ) );</span></a>
<a name="86"><span class="lineNum">      86 </span>                :<span class="lineCov">          1 :   c1.addGeometry( part.clone() );</span></a>
<a name="87"><span class="lineNum">      87 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.isEmpty() );</span></a>
<a name="88"><span class="lineNum">      88 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.numGeometries(), 1 );</span></a>
<a name="89"><span class="lineNum">      89 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.nCoordinates(), 3 );</span></a>
<a name="90"><span class="lineNum">      90 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.ringCount(), 1 );</span></a>
<a name="91"><span class="lineNum">      91 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.partCount(), 1 );</span></a>
<a name="92"><span class="lineNum">      92 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.is3D() );</span></a>
<a name="93"><span class="lineNum">      93 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.isMeasure() );</span></a>
<a name="94"><span class="lineNum">      94 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="95"><span class="lineNum">      95 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.wktTypeStr(), QString( &quot;MultiCurve&quot; ) );</span></a>
<a name="96"><span class="lineNum">      96 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.geometryType(), QString( &quot;MultiCurve&quot; ) );</span></a>
<a name="97"><span class="lineNum">      97 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.dimension(), 1 );</span></a>
<a name="98"><span class="lineNum">      98 </span>                :<span class="lineCov">          1 :   QVERIFY( c1.hasCurvedSegments() );</span></a>
<a name="99"><span class="lineNum">      99 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.area(), 0.0 );</span></a>
<a name="100"><span class="lineNum">     100 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.perimeter(), 0.0 );</span></a>
<a name="101"><span class="lineNum">     101 </span>                :<span class="lineCov">          1 :   QVERIFY( c1.geometryN( 0 ) );</span></a>
<a name="102"><span class="lineNum">     102 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c1.geometryN( 0 ) ), part );</span></a>
<a name="103"><span class="lineNum">     103 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( 100 ) );</span></a>
<a name="104"><span class="lineNum">     104 </span>                :<span class="lineCov">          1 :   QVERIFY( !c1.geometryN( -1 ) );</span></a>
<a name="105"><span class="lineNum">     105 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.vertexCount( 0, 0 ), 3 );</span></a>
<a name="106"><span class="lineNum">     106 </span>                :<span class="lineCov">          1 :   QCOMPARE( c1.vertexCount( 1, 0 ), 0 );</span></a>
<a name="107"><span class="lineNum">     107 </span>                :            : </a>
<a name="108"><span class="lineNum">     108 </span>                :            :   //initial adding of geometry should set z/m type</a>
<a name="109"><span class="lineNum">     109 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 10, 11, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 20, 21, 2 )</span></a>
<a name="110"><span class="lineNum">     110 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 10, 31, 3 ) );</span></a>
<a name="111"><span class="lineNum">     111 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c2;</span></a>
<a name="112"><span class="lineNum">     112 </span>                :<span class="lineCov">          1 :   c2.addGeometry( part.clone() );</span></a>
<a name="113"><span class="lineNum">     113 </span>                :<span class="lineCov">          1 :   QVERIFY( c2.is3D() );</span></a>
<a name="114"><span class="lineNum">     114 </span>                :<span class="lineCov">          1 :   QVERIFY( !c2.isMeasure() );</span></a>
<a name="115"><span class="lineNum">     115 </span>                :<span class="lineCov">          1 :   QCOMPARE( c2.wkbType(), QgsWkbTypes::MultiCurveZ );</span></a>
<a name="116"><span class="lineNum">     116 </span>                :<span class="lineCov">          1 :   QCOMPARE( c2.wktTypeStr(), QString( &quot;MultiCurveZ&quot; ) );</span></a>
<a name="117"><span class="lineNum">     117 </span>                :<span class="lineCov">          1 :   QCOMPARE( c2.geometryType(), QString( &quot;MultiCurve&quot; ) );</span></a>
<a name="118"><span class="lineNum">     118 </span>                :<span class="lineCov">          1 :   QCOMPARE( *( static_cast&lt; const QgsCircularString * &gt;( c2.geometryN( 0 ) ) ), part );</span></a>
<a name="119"><span class="lineNum">     119 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c3;</span></a>
<a name="120"><span class="lineNum">     120 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 10, 11, 0, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 20, 21, 0, 2 )</span></a>
<a name="121"><span class="lineNum">     121 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 10, 31, 0, 3 ) );</span></a>
<a name="122"><span class="lineNum">     122 </span>                :<span class="lineCov">          1 :   c3.addGeometry( part.clone() );</span></a>
<a name="123"><span class="lineNum">     123 </span>                :<span class="lineCov">          1 :   QVERIFY( !c3.is3D() );</span></a>
<a name="124"><span class="lineNum">     124 </span>                :<span class="lineCov">          1 :   QVERIFY( c3.isMeasure() );</span></a>
<a name="125"><span class="lineNum">     125 </span>                :<span class="lineCov">          1 :   QCOMPARE( c3.wkbType(), QgsWkbTypes::MultiCurveM );</span></a>
<a name="126"><span class="lineNum">     126 </span>                :<span class="lineCov">          1 :   QCOMPARE( c3.wktTypeStr(), QString( &quot;MultiCurveM&quot; ) );</span></a>
<a name="127"><span class="lineNum">     127 </span>                :<span class="lineCov">          1 :   QCOMPARE( *( static_cast&lt; const QgsCircularString * &gt;( c3.geometryN( 0 ) ) ), part );</span></a>
<a name="128"><span class="lineNum">     128 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c4;</span></a>
<a name="129"><span class="lineNum">     129 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 10, 11, 2, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 20, 21, 3, 2 )</span></a>
<a name="130"><span class="lineNum">     130 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 10, 31, 4, 5 ) );</span></a>
<a name="131"><span class="lineNum">     131 </span>                :<span class="lineCov">          1 :   c4.addGeometry( part.clone() );</span></a>
<a name="132"><span class="lineNum">     132 </span>                :<span class="lineCov">          1 :   QVERIFY( c4.is3D() );</span></a>
<a name="133"><span class="lineNum">     133 </span>                :<span class="lineCov">          1 :   QVERIFY( c4.isMeasure() );</span></a>
<a name="134"><span class="lineNum">     134 </span>                :<span class="lineCov">          1 :   QCOMPARE( c4.wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="135"><span class="lineNum">     135 </span>                :<span class="lineCov">          1 :   QCOMPARE( c4.wktTypeStr(), QString( &quot;MultiCurveZM&quot; ) );</span></a>
<a name="136"><span class="lineNum">     136 </span>                :<span class="lineCov">          1 :   QCOMPARE( *( static_cast&lt; const QgsCircularString * &gt;( c4.geometryN( 0 ) ) ), part );</span></a>
<a name="137"><span class="lineNum">     137 </span>                :            : </a>
<a name="138"><span class="lineNum">     138 </span>                :            :   //add another part</a>
<a name="139"><span class="lineNum">     139 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c6;</span></a>
<a name="140"><span class="lineNum">     140 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 1, 10 ) &lt;&lt; QgsPoint( 2, 11 ) &lt;&lt; QgsPoint( 1, 20 ) );</span></a>
<a name="141"><span class="lineNum">     141 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="142"><span class="lineNum">     142 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 0, 0 ), 3 );</span></a>
<a name="143"><span class="lineNum">     143 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 9, 12 ) &lt;&lt; QgsPoint( 3, 13 )  &lt;&lt; QgsPoint( 9, 20 ) );</span></a>
<a name="144"><span class="lineNum">     144 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="145"><span class="lineNum">     145 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 1, 0 ), 3 );</span></a>
<a name="146"><span class="lineNum">     146 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.numGeometries(), 2 );</span></a>
<a name="147"><span class="lineNum">     147 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.geometryN( 0 ) );</span></a>
<a name="148"><span class="lineNum">     148 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 1 ) ), part );</span></a>
<a name="149"><span class="lineNum">     149 </span>                :            : </a>
<a name="150"><span class="lineNum">     150 </span>                :            :   //adding subsequent points should not alter z/m type, regardless of parts type</a>
<a name="151"><span class="lineNum">     151 </span>                :<span class="lineCov">          1 :   c6.clear();</span></a>
<a name="152"><span class="lineNum">     152 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="153"><span class="lineNum">     153 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="154"><span class="lineNum">     154 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 1, 10, 2 ) &lt;&lt; QgsPoint( 2, 11, 3 ) &lt;&lt; QgsPoint( 1, 20, 4 ) ) ;</span></a>
<a name="155"><span class="lineNum">     155 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="156"><span class="lineNum">     156 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="157"><span class="lineNum">     157 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 0, 0 ), 3 );</span></a>
<a name="158"><span class="lineNum">     158 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 1, 0 ), 3 );</span></a>
<a name="159"><span class="lineNum">     159 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 2, 0 ), 0 );</span></a>
<a name="160"><span class="lineNum">     160 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( -1, 0 ), 0 );</span></a>
<a name="161"><span class="lineNum">     161 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.nCoordinates(), 6 );</span></a>
<a name="162"><span class="lineNum">     162 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.ringCount(), 1 );</span></a>
<a name="163"><span class="lineNum">     163 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.partCount(), 2 );</span></a>
<a name="164"><span class="lineNum">     164 </span>                :<span class="lineCov">          1 :   QVERIFY( !c6.is3D() );</span></a>
<a name="165"><span class="lineNum">     165 </span>                :<span class="lineCov">          1 :   const QgsCircularString *ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 0 ) );</span></a>
<a name="166"><span class="lineNum">     166 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( 9, 12 ) );</span></a>
<a name="167"><span class="lineNum">     167 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( 3, 13 ) );</span></a>
<a name="168"><span class="lineNum">     168 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( 9, 20 ) );</span></a>
<a name="169"><span class="lineNum">     169 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 1 ) );</span></a>
<a name="170"><span class="lineNum">     170 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( 1, 10 ) );</span></a>
<a name="171"><span class="lineNum">     171 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( 2, 11 ) );</span></a>
<a name="172"><span class="lineNum">     172 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( 1, 20 ) );</span></a>
<a name="173"><span class="lineNum">     173 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 21, 30, 0, 2 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 32, 41, 0, 3 )</span></a>
<a name="174"><span class="lineNum">     174 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 21, 51, 0, 4 ) ) ;</span></a>
<a name="175"><span class="lineNum">     175 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="176"><span class="lineNum">     176 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="177"><span class="lineNum">     177 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 0, 0 ), 3 );</span></a>
<a name="178"><span class="lineNum">     178 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 1, 0 ), 3 );</span></a>
<a name="179"><span class="lineNum">     179 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.vertexCount( 2, 0 ), 3 );</span></a>
<a name="180"><span class="lineNum">     180 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.nCoordinates(), 9 );</span></a>
<a name="181"><span class="lineNum">     181 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.ringCount(), 1 );</span></a>
<a name="182"><span class="lineNum">     182 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.partCount(), 3 );</span></a>
<a name="183"><span class="lineNum">     183 </span>                :<span class="lineCov">          1 :   QVERIFY( !c6.is3D() );</span></a>
<a name="184"><span class="lineNum">     184 </span>                :<span class="lineCov">          1 :   QVERIFY( !c6.isMeasure() );</span></a>
<a name="185"><span class="lineNum">     185 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 2 ) );</span></a>
<a name="186"><span class="lineNum">     186 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( 21, 30 ) );</span></a>
<a name="187"><span class="lineNum">     187 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( 32, 41 ) );</span></a>
<a name="188"><span class="lineNum">     188 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( 21, 51 ) );</span></a>
<a name="189"><span class="lineNum">     189 </span>                :            : </a>
<a name="190"><span class="lineNum">     190 </span>                :<span class="lineCov">          1 :   c6.clear();</span></a>
<a name="191"><span class="lineNum">     191 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 1, 10, 2 ) &lt;&lt; QgsPoint( 2, 11, 3 ) &lt;&lt; QgsPoint( 1, 21, 4 ) ) ;</span></a>
<a name="192"><span class="lineNum">     192 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="193"><span class="lineNum">     193 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveZ );</span></a>
<a name="194"><span class="lineNum">     194 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 2, 20 ) &lt;&lt; QgsPoint( 3, 31 ) &lt;&lt; QgsPoint( 2, 41 ) ) ;</span></a>
<a name="195"><span class="lineNum">     195 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="196"><span class="lineNum">     196 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveZ );</span></a>
<a name="197"><span class="lineNum">     197 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.is3D() );</span></a>
<a name="198"><span class="lineNum">     198 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 0 ) );</span></a>
<a name="199"><span class="lineNum">     199 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( 1, 10, 2 ) );</span></a>
<a name="200"><span class="lineNum">     200 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( 2, 11, 3 ) );</span></a>
<a name="201"><span class="lineNum">     201 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( 1, 21, 4 ) );</span></a>
<a name="202"><span class="lineNum">     202 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 1 ) );</span></a>
<a name="203"><span class="lineNum">     203 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( 2, 20, 0 ) );</span></a>
<a name="204"><span class="lineNum">     204 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( 3, 31, 0 ) );</span></a>
<a name="205"><span class="lineNum">     205 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( 2, 41, 0 ) );</span></a>
<a name="206"><span class="lineNum">     206 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 5, 50, 0, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 6, 61, 0, 5 )</span></a>
<a name="207"><span class="lineNum">     207 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 5, 71, 0, 6 ) ) ;</span></a>
<a name="208"><span class="lineNum">     208 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="209"><span class="lineNum">     209 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveZ );</span></a>
<a name="210"><span class="lineNum">     210 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.is3D() );</span></a>
<a name="211"><span class="lineNum">     211 </span>                :<span class="lineCov">          1 :   QVERIFY( !c6.isMeasure() );</span></a>
<a name="212"><span class="lineNum">     212 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 2 ) );</span></a>
<a name="213"><span class="lineNum">     213 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( 5, 50, 0 ) );</span></a>
<a name="214"><span class="lineNum">     214 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( 6, 61, 0 ) );</span></a>
<a name="215"><span class="lineNum">     215 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( 5, 71, 0 ) );</span></a>
<a name="216"><span class="lineNum">     216 </span>                :            : </a>
<a name="217"><span class="lineNum">     217 </span>                :<span class="lineCov">          1 :   c6.clear();</span></a>
<a name="218"><span class="lineNum">     218 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="219"><span class="lineNum">     219 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 5, 50, 0, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 6, 61, 0, 5 )</span></a>
<a name="220"><span class="lineNum">     220 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 5, 71, 0, 5 ) ) ;</span></a>
<a name="221"><span class="lineNum">     221 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="222"><span class="lineNum">     222 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveM );</span></a>
<a name="223"><span class="lineNum">     223 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 2, 20 ) &lt;&lt; QgsPoint( 3, 31 )   &lt;&lt; QgsPoint( 2, 41 ) ) ;</span></a>
<a name="224"><span class="lineNum">     224 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="225"><span class="lineNum">     225 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveM );</span></a>
<a name="226"><span class="lineNum">     226 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.isMeasure() );</span></a>
<a name="227"><span class="lineNum">     227 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 0 ) );</span></a>
<a name="228"><span class="lineNum">     228 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointM, 5, 50, 0, 4 ) );</span></a>
<a name="229"><span class="lineNum">     229 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointM, 6, 61, 0, 5 ) );</span></a>
<a name="230"><span class="lineNum">     230 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointM, 5, 71, 0, 5 ) );</span></a>
<a name="231"><span class="lineNum">     231 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 1 ) );</span></a>
<a name="232"><span class="lineNum">     232 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointM, 2, 20, 0, 0 ) );</span></a>
<a name="233"><span class="lineNum">     233 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointM, 3, 31, 0, 0 ) );</span></a>
<a name="234"><span class="lineNum">     234 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointM, 2, 41, 0, 0 ) );</span></a>
<a name="235"><span class="lineNum">     235 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 11, 12, 13 ) &lt;&lt; QgsPoint( 14, 15, 16 ) &lt;&lt; QgsPoint( 11, 25, 17 ) ) ;</span></a>
<a name="236"><span class="lineNum">     236 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="237"><span class="lineNum">     237 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveM );</span></a>
<a name="238"><span class="lineNum">     238 </span>                :<span class="lineCov">          1 :   QVERIFY( !c6.is3D() );</span></a>
<a name="239"><span class="lineNum">     239 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.isMeasure() );</span></a>
<a name="240"><span class="lineNum">     240 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 2 ) );</span></a>
<a name="241"><span class="lineNum">     241 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointM, 11, 12, 0, 0 ) );</span></a>
<a name="242"><span class="lineNum">     242 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointM, 14, 15, 0, 0 ) );</span></a>
<a name="243"><span class="lineNum">     243 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointM, 11, 25, 0, 0 ) );</span></a>
<a name="244"><span class="lineNum">     244 </span>                :            : </a>
<a name="245"><span class="lineNum">     245 </span>                :<span class="lineCov">          1 :   c6.clear();</span></a>
<a name="246"><span class="lineNum">     246 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 5, 50, 1, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 6, 61, 3, 5 )</span></a>
<a name="247"><span class="lineNum">     247 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 5, 71, 4, 6 ) ) ;</span></a>
<a name="248"><span class="lineNum">     248 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="249"><span class="lineNum">     249 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="250"><span class="lineNum">     250 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7, 17 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 3, 13 )</span></a>
<a name="251"><span class="lineNum">     251 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7, 11 ) ) ;</span></a>
<a name="252"><span class="lineNum">     252 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="253"><span class="lineNum">     253 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="254"><span class="lineNum">     254 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.isMeasure() );</span></a>
<a name="255"><span class="lineNum">     255 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.is3D() );</span></a>
<a name="256"><span class="lineNum">     256 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 0 ) );</span></a>
<a name="257"><span class="lineNum">     257 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointZM, 5, 50, 1, 4 ) );</span></a>
<a name="258"><span class="lineNum">     258 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointZM, 6, 61, 3, 5 ) );</span></a>
<a name="259"><span class="lineNum">     259 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointZM, 5, 71, 4, 6 ) );</span></a>
<a name="260"><span class="lineNum">     260 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 1 ) );</span></a>
<a name="261"><span class="lineNum">     261 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointZM, 7, 17, 0, 0 ) );</span></a>
<a name="262"><span class="lineNum">     262 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointZM, 3, 13, 0, 0 ) );</span></a>
<a name="263"><span class="lineNum">     263 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointZM, 7, 11, 0, 0 ) );</span></a>
<a name="264"><span class="lineNum">     264 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 77, 87, 7 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 83, 83, 8 )</span></a>
<a name="265"><span class="lineNum">     265 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 77, 81, 9 ) ) ;</span></a>
<a name="266"><span class="lineNum">     266 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="267"><span class="lineNum">     267 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="268"><span class="lineNum">     268 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.is3D() );</span></a>
<a name="269"><span class="lineNum">     269 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.isMeasure() );</span></a>
<a name="270"><span class="lineNum">     270 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 2 ) );</span></a>
<a name="271"><span class="lineNum">     271 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointZM, 77, 87, 7, 0 ) );</span></a>
<a name="272"><span class="lineNum">     272 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointZM, 83, 83, 8, 0 ) );</span></a>
<a name="273"><span class="lineNum">     273 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointZM, 77, 81, 9, 0 ) );</span></a>
<a name="274"><span class="lineNum">     274 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 177, 187, 0, 9 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 183, 183, 0, 11 )</span></a>
<a name="275"><span class="lineNum">     275 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 177, 181, 0, 13 ) ) ;</span></a>
<a name="276"><span class="lineNum">     276 </span>                :<span class="lineCov">          1 :   c6.addGeometry( part.clone() );</span></a>
<a name="277"><span class="lineNum">     277 </span>                :<span class="lineCov">          1 :   QCOMPARE( c6.wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="278"><span class="lineNum">     278 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.is3D() );</span></a>
<a name="279"><span class="lineNum">     279 </span>                :<span class="lineCov">          1 :   QVERIFY( c6.isMeasure() );</span></a>
<a name="280"><span class="lineNum">     280 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c6.geometryN( 3 ) );</span></a>
<a name="281"><span class="lineNum">     281 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointZM, 177, 187, 0, 9 ) );</span></a>
<a name="282"><span class="lineNum">     282 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointZM, 183, 183, 0, 11 ) );</span></a>
<a name="283"><span class="lineNum">     283 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointZM, 177, 181, 0, 13 ) );</span></a>
<a name="284"><span class="lineNum">     284 </span>                :            : </a>
<a name="285"><span class="lineNum">     285 </span>                :            :   //clear</a>
<a name="286"><span class="lineNum">     286 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c7;</span></a>
<a name="287"><span class="lineNum">     287 </span>                :<span class="lineCov">          2 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 5, 50, 1, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 6, 61, 3, 5 )</span></a>
<a name="288"><span class="lineNum">     288 </span>                :<span class="lineCov">          1 :                   &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 5, 71, 4, 6 ) ) ;</span></a>
<a name="289"><span class="lineNum">     289 </span>                :<span class="lineCov">          1 :   c7.addGeometry( part.clone() );</span></a>
<a name="290"><span class="lineNum">     290 </span>                :<span class="lineCov">          1 :   c7.addGeometry( part.clone() );</span></a>
<a name="291"><span class="lineNum">     291 </span>                :<span class="lineCov">          1 :   QCOMPARE( c7.numGeometries(), 2 );</span></a>
<a name="292"><span class="lineNum">     292 </span>                :<span class="lineCov">          1 :   c7.clear();</span></a>
<a name="293"><span class="lineNum">     293 </span>                :<span class="lineCov">          1 :   QVERIFY( c7.isEmpty() );</span></a>
<a name="294"><span class="lineNum">     294 </span>                :<span class="lineCov">          1 :   QCOMPARE( c7.numGeometries(), 0 );</span></a>
<a name="295"><span class="lineNum">     295 </span>                :<span class="lineCov">          1 :   QCOMPARE( c7.nCoordinates(), 0 );</span></a>
<a name="296"><span class="lineNum">     296 </span>                :<span class="lineCov">          1 :   QCOMPARE( c7.ringCount(), 0 );</span></a>
<a name="297"><span class="lineNum">     297 </span>                :<span class="lineCov">          1 :   QCOMPARE( c7.partCount(), 0 );</span></a>
<a name="298"><span class="lineNum">     298 </span>                :<span class="lineCov">          1 :   QVERIFY( !c7.is3D() );</span></a>
<a name="299"><span class="lineNum">     299 </span>                :<span class="lineCov">          1 :   QVERIFY( !c7.isMeasure() );</span></a>
<a name="300"><span class="lineNum">     300 </span>                :<span class="lineCov">          1 :   QCOMPARE( c7.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="301"><span class="lineNum">     301 </span>                :            : </a>
<a name="302"><span class="lineNum">     302 </span>                :            :   //clone</a>
<a name="303"><span class="lineNum">     303 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c11;</span></a>
<a name="304"><span class="lineNum">     304 </span>                :<span class="lineCov">          1 :   std::unique_ptr&lt; QgsMultiCurve &gt;cloned( c11.clone() );</span></a>
<a name="305"><span class="lineNum">     305 </span>                :<span class="lineCov">          1 :   QVERIFY( cloned-&gt;isEmpty() );</span></a>
<a name="306"><span class="lineNum">     306 </span>                :<span class="lineCov">          1 :   c11.addGeometry( part.clone() );</span></a>
<a name="307"><span class="lineNum">     307 </span>                :<span class="lineCov">          1 :   c11.addGeometry( part.clone() );</span></a>
<a name="308"><span class="lineNum">     308 </span>                :<span class="lineCov">          1 :   cloned.reset( c11.clone() );</span></a>
<a name="309"><span class="lineNum">     309 </span>                :<span class="lineCov">          1 :   QCOMPARE( cloned-&gt;numGeometries(), 2 );</span></a>
<a name="310"><span class="lineNum">     310 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( cloned-&gt;geometryN( 0 ) );</span></a>
<a name="311"><span class="lineNum">     311 </span>                :<span class="lineCov">          1 :   QCOMPARE( *ls, part );</span></a>
<a name="312"><span class="lineNum">     312 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( cloned-&gt;geometryN( 1 ) );</span></a>
<a name="313"><span class="lineNum">     313 </span>                :<span class="lineCov">          1 :   QCOMPARE( *ls, part );</span></a>
<a name="314"><span class="lineNum">     314 </span>                :            : </a>
<a name="315"><span class="lineNum">     315 </span>                :            :   //copy constructor</a>
<a name="316"><span class="lineNum">     316 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c12;</span></a>
<a name="317"><span class="lineNum">     317 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c13( c12 );</span></a>
<a name="318"><span class="lineNum">     318 </span>                :<span class="lineCov">          1 :   QVERIFY( c13.isEmpty() );</span></a>
<a name="319"><span class="lineNum">     319 </span>                :<span class="lineCov">          1 :   c12.addGeometry( part.clone() );</span></a>
<a name="320"><span class="lineNum">     320 </span>                :<span class="lineCov">          1 :   c12.addGeometry( part.clone() );</span></a>
<a name="321"><span class="lineNum">     321 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c14( c12 );</span></a>
<a name="322"><span class="lineNum">     322 </span>                :<span class="lineCov">          1 :   QCOMPARE( c14.numGeometries(), 2 );</span></a>
<a name="323"><span class="lineNum">     323 </span>                :<span class="lineCov">          1 :   QCOMPARE( c14.wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="324"><span class="lineNum">     324 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c14.geometryN( 0 ) );</span></a>
<a name="325"><span class="lineNum">     325 </span>                :<span class="lineCov">          1 :   QCOMPARE( *ls, part );</span></a>
<a name="326"><span class="lineNum">     326 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c14.geometryN( 1 ) );</span></a>
<a name="327"><span class="lineNum">     327 </span>                :<span class="lineCov">          1 :   QCOMPARE( *ls, part );</span></a>
<a name="328"><span class="lineNum">     328 </span>                :            : </a>
<a name="329"><span class="lineNum">     329 </span>                :            :   //assignment operator</a>
<a name="330"><span class="lineNum">     330 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c15;</span></a>
<a name="331"><span class="lineNum">     331 </span>                :<span class="lineCov">          1 :   c15 = c13;</span></a>
<a name="332"><span class="lineNum">     332 </span>                :<span class="lineCov">          1 :   QCOMPARE( c15.numGeometries(), 0 );</span></a>
<a name="333"><span class="lineNum">     333 </span>                :<span class="lineCov">          1 :   c15 = c14;</span></a>
<a name="334"><span class="lineNum">     334 </span>                :<span class="lineCov">          1 :   QCOMPARE( c15.numGeometries(), 2 );</span></a>
<a name="335"><span class="lineNum">     335 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c15.geometryN( 0 ) );</span></a>
<a name="336"><span class="lineNum">     336 </span>                :<span class="lineCov">          1 :   QCOMPARE( *ls, part );</span></a>
<a name="337"><span class="lineNum">     337 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( c15.geometryN( 1 ) );</span></a>
<a name="338"><span class="lineNum">     338 </span>                :<span class="lineCov">          1 :   QCOMPARE( *ls, part );</span></a>
<a name="339"><span class="lineNum">     339 </span>                :            : </a>
<a name="340"><span class="lineNum">     340 </span>                :            :   //toCurveType</a>
<a name="341"><span class="lineNum">     341 </span>                :<span class="lineCov">          1 :   std::unique_ptr&lt; QgsMultiCurve &gt; curveType( c12.toCurveType() );</span></a>
<a name="342"><span class="lineNum">     342 </span>                :<span class="lineCov">          1 :   QCOMPARE( curveType-&gt;wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="343"><span class="lineNum">     343 </span>                :<span class="lineCov">          1 :   QCOMPARE( curveType-&gt;numGeometries(), 2 );</span></a>
<a name="344"><span class="lineNum">     344 </span>                :<span class="lineCov">          1 :   const QgsCircularString *curve = static_cast&lt; const QgsCircularString * &gt;( curveType-&gt;geometryN( 0 ) );</span></a>
<a name="345"><span class="lineNum">     345 </span>                :<span class="lineCov">          1 :   QCOMPARE( *curve, *static_cast&lt; const QgsCircularString * &gt;( c12.geometryN( 0 ) ) );</span></a>
<a name="346"><span class="lineNum">     346 </span>                :<span class="lineCov">          1 :   curve = static_cast&lt; const QgsCircularString * &gt;( curveType-&gt;geometryN( 1 ) );</span></a>
<a name="347"><span class="lineNum">     347 </span>                :<span class="lineCov">          1 :   QCOMPARE( *curve, *static_cast&lt; const QgsCircularString * &gt;( c12.geometryN( 1 ) ) );</span></a>
<a name="348"><span class="lineNum">     348 </span>                :            : </a>
<a name="349"><span class="lineNum">     349 </span>                :            :   //to/fromWKB</a>
<a name="350"><span class="lineNum">     350 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c16;</span></a>
<a name="351"><span class="lineNum">     351 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7, 17 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 3, 13 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7, 11 ) ) ;</span></a>
<a name="352"><span class="lineNum">     352 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="353"><span class="lineNum">     353 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::Point, 27, 37 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 43, 43 )  &lt;&lt; QgsPoint( QgsWkbTypes::Point, 27, 54 ) ) ;</span></a>
<a name="354"><span class="lineNum">     354 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="355"><span class="lineNum">     355 </span>                :<span class="lineCov">          1 :   QByteArray wkb16 = c16.asWkb();</span></a>
<a name="356"><span class="lineNum">     356 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c17;</span></a>
<a name="357"><span class="lineNum">     357 </span>                :<span class="lineCov">          1 :   QgsConstWkbPtr wkb16ptr( wkb16 );</span></a>
<a name="358"><span class="lineNum">     358 </span>                :<span class="lineCov">          1 :   c17.fromWkb( wkb16ptr );</span></a>
<a name="359"><span class="lineNum">     359 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.numGeometries(), 2 );</span></a>
<a name="360"><span class="lineNum">     360 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 0 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 0 ) ) );</span></a>
<a name="361"><span class="lineNum">     361 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 1 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 1 ) ) );</span></a>
<a name="362"><span class="lineNum">     362 </span>                :            : </a>
<a name="363"><span class="lineNum">     363 </span>                :            :   //parts with Z</a>
<a name="364"><span class="lineNum">     364 </span>                :<span class="lineCov">          1 :   c16.clear();</span></a>
<a name="365"><span class="lineNum">     365 </span>                :<span class="lineCov">          1 :   c17.clear();</span></a>
<a name="366"><span class="lineNum">     366 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 7, 17, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 3, 13, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 7, 11, 3 ) ) ;</span></a>
<a name="367"><span class="lineNum">     367 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="368"><span class="lineNum">     368 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 27, 37, 2 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 43, 43, 5 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 27, 53, 6 ) ) ;</span></a>
<a name="369"><span class="lineNum">     369 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="370"><span class="lineNum">     370 </span>                :<span class="lineCov">          1 :   wkb16 = c16.asWkb();</span></a>
<a name="371"><span class="lineNum">     371 </span>                :<span class="lineCov">          1 :   QgsConstWkbPtr wkb16ptr2( wkb16 );</span></a>
<a name="372"><span class="lineNum">     372 </span>                :<span class="lineCov">          1 :   c17.fromWkb( wkb16ptr2 );</span></a>
<a name="373"><span class="lineNum">     373 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.numGeometries(), 2 );</span></a>
<a name="374"><span class="lineNum">     374 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.wkbType(), QgsWkbTypes::MultiCurveZ );</span></a>
<a name="375"><span class="lineNum">     375 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 0 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 0 ) ) );</span></a>
<a name="376"><span class="lineNum">     376 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 1 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 1 ) ) );</span></a>
<a name="377"><span class="lineNum">     377 </span>                :            : </a>
<a name="378"><span class="lineNum">     378 </span>                :            :   //parts with m</a>
<a name="379"><span class="lineNum">     379 </span>                :<span class="lineCov">          1 :   c16.clear();</span></a>
<a name="380"><span class="lineNum">     380 </span>                :<span class="lineCov">          1 :   c17.clear();</span></a>
<a name="381"><span class="lineNum">     381 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 7, 17, 0, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 3, 13, 0, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 7, 11, 0, 5 ) ) ;</span></a>
<a name="382"><span class="lineNum">     382 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="383"><span class="lineNum">     383 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 27, 37, 0, 2 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 43, 43, 0, 5 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointM, 27, 53, 0, 7 ) ) ;</span></a>
<a name="384"><span class="lineNum">     384 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="385"><span class="lineNum">     385 </span>                :<span class="lineCov">          1 :   wkb16 = c16.asWkb();</span></a>
<a name="386"><span class="lineNum">     386 </span>                :<span class="lineCov">          1 :   QgsConstWkbPtr wkb16ptr3( wkb16 );</span></a>
<a name="387"><span class="lineNum">     387 </span>                :<span class="lineCov">          1 :   c17.fromWkb( wkb16ptr3 );</span></a>
<a name="388"><span class="lineNum">     388 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.numGeometries(), 2 );</span></a>
<a name="389"><span class="lineNum">     389 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.wkbType(), QgsWkbTypes::MultiCurveM );</span></a>
<a name="390"><span class="lineNum">     390 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 0 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 0 ) ) );</span></a>
<a name="391"><span class="lineNum">     391 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 1 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 1 ) ) );</span></a>
<a name="392"><span class="lineNum">     392 </span>                :            : </a>
<a name="393"><span class="lineNum">     393 </span>                :            :   // parts with ZM</a>
<a name="394"><span class="lineNum">     394 </span>                :<span class="lineCov">          1 :   c16.clear();</span></a>
<a name="395"><span class="lineNum">     395 </span>                :<span class="lineCov">          1 :   c17.clear();</span></a>
<a name="396"><span class="lineNum">     396 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 7, 17, 4, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 3, 13, 1, 4 )  &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 7, 11, 2, 5 ) ) ;</span></a>
<a name="397"><span class="lineNum">     397 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="398"><span class="lineNum">     398 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 27, 37, 6, 2 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 43, 43, 11, 5 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 27, 47, 12, 15 ) ) ;</span></a>
<a name="399"><span class="lineNum">     399 </span>                :<span class="lineCov">          1 :   c16.addGeometry( part.clone() );</span></a>
<a name="400"><span class="lineNum">     400 </span>                :<span class="lineCov">          1 :   wkb16 = c16.asWkb();</span></a>
<a name="401"><span class="lineNum">     401 </span>                :<span class="lineCov">          1 :   QgsConstWkbPtr wkb16ptr4( wkb16 );</span></a>
<a name="402"><span class="lineNum">     402 </span>                :<span class="lineCov">          1 :   c17.fromWkb( wkb16ptr4 );</span></a>
<a name="403"><span class="lineNum">     403 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.numGeometries(), 2 );</span></a>
<a name="404"><span class="lineNum">     404 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.wkbType(), QgsWkbTypes::MultiCurveZM );</span></a>
<a name="405"><span class="lineNum">     405 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 0 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 0 ) ) );</span></a>
<a name="406"><span class="lineNum">     406 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c17.geometryN( 1 ) ), *static_cast&lt; const QgsCircularString * &gt;( c16.geometryN( 1 ) ) );</span></a>
<a name="407"><span class="lineNum">     407 </span>                :            : </a>
<a name="408"><span class="lineNum">     408 </span>                :            :   //bad WKB - check for no crash</a>
<a name="409"><span class="lineNum">     409 </span>                :<span class="lineCov">          1 :   c17.clear();</span></a>
<a name="410"><span class="lineNum">     410 </span>                :<span class="lineCov">          1 :   QgsConstWkbPtr nullPtr( nullptr, 0 );</span></a>
<a name="411"><span class="lineNum">     411 </span>                :<span class="lineCov">          1 :   QVERIFY( !c17.fromWkb( nullPtr ) );</span></a>
<a name="412"><span class="lineNum">     412 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="413"><span class="lineNum">     413 </span>                :<span class="lineCov">          1 :   QgsPoint point( 1, 2 );</span></a>
<a name="414"><span class="lineNum">     414 </span>                :<span class="lineCov">          1 :   QByteArray wkbPoint = point.asWkb();</span></a>
<a name="415"><span class="lineNum">     415 </span>                :<span class="lineCov">          1 :   QgsConstWkbPtr wkbPointPtr( wkbPoint );</span></a>
<a name="416"><span class="lineNum">     416 </span>                :<span class="lineCov">          1 :   QVERIFY( !c17.fromWkb( wkbPointPtr ) );</span></a>
<a name="417"><span class="lineNum">     417 </span>                :<span class="lineCov">          1 :   QCOMPARE( c17.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="418"><span class="lineNum">     418 </span>                :            : </a>
<a name="419"><span class="lineNum">     419 </span>                :            :   //to/from WKT</a>
<a name="420"><span class="lineNum">     420 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c18;</span></a>
<a name="421"><span class="lineNum">     421 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 7, 17, 4, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 3, 13, 1, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 7, 11, 2, 8 ) ) ;</span></a>
<a name="422"><span class="lineNum">     422 </span>                :<span class="lineCov">          1 :   c18.addGeometry( part.clone() );</span></a>
<a name="423"><span class="lineNum">     423 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 27, 37, 6, 2 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 43, 43, 11, 5 )  &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 27, 53, 21, 52 ) ) ;</span></a>
<a name="424"><span class="lineNum">     424 </span>                :<span class="lineCov">          1 :   c18.addGeometry( part.clone() );</span></a>
<a name="425"><span class="lineNum">     425 </span>                :            : </a>
<a name="426"><span class="lineNum">     426 </span>                :<span class="lineCov">          1 :   QString wkt = c18.asWkt();</span></a>
<a name="427"><span class="lineNum">     427 </span>                :<span class="lineCov">          1 :   QVERIFY( !wkt.isEmpty() );</span></a>
<a name="428"><span class="lineNum">     428 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c19;</span></a>
<a name="429"><span class="lineNum">     429 </span>                :<span class="lineCov">          1 :   QVERIFY( c19.fromWkt( wkt ) );</span></a>
<a name="430"><span class="lineNum">     430 </span>                :<span class="lineCov">          1 :   QCOMPARE( c19.numGeometries(), 2 );</span></a>
<a name="431"><span class="lineNum">     431 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c19.geometryN( 0 ) ), *static_cast&lt; const QgsCircularString * &gt;( c18.geometryN( 0 ) ) );</span></a>
<a name="432"><span class="lineNum">     432 </span>                :<span class="lineCov">          1 :   QCOMPARE( *static_cast&lt; const QgsCircularString * &gt;( c19.geometryN( 1 ) ), *static_cast&lt; const QgsCircularString * &gt;( c18.geometryN( 1 ) ) );</span></a>
<a name="433"><span class="lineNum">     433 </span>                :            : </a>
<a name="434"><span class="lineNum">     434 </span>                :            :   //bad WKT</a>
<a name="435"><span class="lineNum">     435 </span>                :<span class="lineCov">          1 :   QgsMultiCurve c20;</span></a>
<a name="436"><span class="lineNum">     436 </span>                :<span class="lineCov">          1 :   QVERIFY( !c20.fromWkt( &quot;Point()&quot; ) );</span></a>
<a name="437"><span class="lineNum">     437 </span>                :<span class="lineCov">          1 :   QVERIFY( c20.isEmpty() );</span></a>
<a name="438"><span class="lineNum">     438 </span>                :<span class="lineCov">          1 :   QCOMPARE( c20.numGeometries(), 0 );</span></a>
<a name="439"><span class="lineNum">     439 </span>                :<span class="lineCov">          1 :   QCOMPARE( c20.wkbType(), QgsWkbTypes::MultiCurve );</span></a>
<a name="440"><span class="lineNum">     440 </span>                :            : </a>
<a name="441"><span class="lineNum">     441 </span>                :            :   //as JSON</a>
<a name="442"><span class="lineNum">     442 </span>                :<span class="lineCov">          1 :   QgsMultiCurve exportC;</span></a>
<a name="443"><span class="lineNum">     443 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7, 17 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 3, 13 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7, 11 ) ) ;</span></a>
<a name="444"><span class="lineNum">     444 </span>                :<span class="lineCov">          1 :   exportC.addGeometry( part.clone() );</span></a>
<a name="445"><span class="lineNum">     445 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::Point, 27, 37 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 43, 43 )  &lt;&lt; QgsPoint( QgsWkbTypes::Point, 27, 47 ) ) ;</span></a>
<a name="446"><span class="lineNum">     446 </span>                :<span class="lineCov">          1 :   exportC.addGeometry( part.clone() );</span></a>
<a name="447"><span class="lineNum">     447 </span>                :            : </a>
<a name="448"><span class="lineNum">     448 </span>                :            :   // GML document for compare</a>
<a name="449"><span class="lineNum">     449 </span>                :<span class="lineCov">          1 :   QDomDocument doc( &quot;gml&quot; );</span></a>
<a name="450"><span class="lineNum">     450 </span>                :            : </a>
<a name="451"><span class="lineNum">     451 </span>                :            :   // as GML2</a>
<a name="452"><span class="lineNum">     452 </span>                :<span class="lineCov">          2 :   QString expectedSimpleGML2( QStringLiteral( &quot;&lt;MultiLineString xmlns=\&quot;gml\&quot;&gt;&lt;lineStringMember xmlns=\&quot;gml\&quot;&gt;&lt;LineString xmlns=\&quot;gml\&quot;&gt;&lt;coordinates xmlns=\&quot;gml\&quot; cs=\&quot;,\&quot; ts=\&quot; \&quot;&gt;7,17 6.9,17 6.9,17 6.8,17 6.8,17.1 6.7,17.1 6.7,17.1 6.6,17.1 6.6,17.1 6.5,17.1 6.5,17.1 6.4,17.1 6.4,17.1 6.3,17.1 6.2,17.2 6.2,17.2 6.1,17.2 6.1,17.2 6,17.2 6,17.2 5.9,17.2 5.9,17.2 5.8,17.2 5.7,17.2 5.7,17.1 5.6,17.1 5.6,17.1 5.5,17.1 5.5,17.1 5.4,17.1 5.4,17.1 5.3,17.1 5.3,17.1 5.2,17.1 5.2,17 5.1,17 5,17 5,17 4.9,17 4.9,17 4.8,16.9 4.8,16.9 4.7,16.9 4.7,16.9 4.6,16.9 4.6,16.8 4.5,16.8 4.5,16.8 4.4,16.8 4.4,16.7 4.3,16.7 4.3,16.7 4.3,16.6 4.2,16.6 4.2,16.6 4.1,16.5 4.1,16.5 4,16.5 4,16.4 3.9,16.4 3.9,16.4 3.9,16.3 3.8,16.3 3.8,16.3 3.7,16.2 3.7,16.2 3.7,16.1 3.6,16.1 3.6,16.1 3.6,16 3.5,16 3.5,15.9 3.5,15.9 3.4,15.8 3.4,15.8 3.4,15.7 3.3,15.7 3.3,15.7 3.3,15.6 3.2,15.6 3.2,15.5 3.2,15.5 3.2,15.4 3.1,15.4 3.1,15.3 3.1,15.3 3.1,15.2 3.1,15.2 3,15.1 3,15.1 3,15 3,15 3,14.9 3,14.8 2.9,14.8 2.9,14.7 2.9,14.7 2.9,14.6 2.9,14.6 2.9,14.5 2.9,14.5 2.9,14.4 2.9,14.4 2.9,14.3 2.8,14.2 2.8,14.2 2.8,14.1 2.8,14.1 2.8,14 2.8,14 2.8,13.9 2.8,13.9 2.8,13.8 2.8,13.8 2.9,13.7 2.9,13.6 2.9,13.6 2.9,13.5 2.9,13.5 2.9,13.4 2.9,13.4 2.9,13.3 2.9,13.3 2.9,13.2 3,13.2 3,13.1 3,13 3,13 3,12.9 3,12.9 3.1,12.8 3.1,12.8 3.1,12.7 3.1,12.7 3.1,12.6 3.2,12.6 3.2,12.5 3.2,12.5 3.2,12.4 3.3,12.4 3.3,12.3 3.3,12.3 3.4,12.3 3.4,12.2 3.4,12.2 3.5,12.1 3.5,12.1 3.5,12 3.6,12 3.6,11.9 3.6,11.9 3.7,11.9 3.7,11.8 3.7,11.8 3.8,11.7 3.8,11.7 3.9,11.7 3.9,11.6 3.9,11.6 4,11.6 4,11.5 4.1,11.5 4.1,11.5 4.2,11.4 4.2,11.4 4.3,11.4 4.3,11.3 4.3,11.3 4.4,11.3 4.4,11.2 4.5,11.2 4.5,11.2 4.6,11.2 4.6,11.1 4.7,11.1 4.7,11.1 4.8,11.1 4.8,11.1 4.9,11 4.9,11 5,11 5,11 5.1,11 5.2,11 5.2,10.9 5.3,10.9 5.3,10.9 5.4,10.9 5.4,10.9 5.5,10.9 5.5,10.9 5.6,10.9 5.6,10.9 5.7,10.9 5.7,10.8 5.8,10.8 5.9,10.8 5.9,10.8 6,10.8 6,10.8 6.1,10.8 6.1,10.8 6.2,10.8 6.2,10.8 6.3,10.9 6.4,10.9 6.4,10.9 6.5,10.9 6.5,10.9 6.6,10.9 6.6,10.9 6.7,10.9 6.7,10.9 6.8,10.9 6.8,11 6.9,11 6.9,11 7,11&lt;/coordinates&gt;&lt;/LineString&gt;&lt;/lineStringMember&gt;&lt;lineStringMember xmlns=\&quot;gml\&quot;&gt;&lt;LineString xmlns=\&quot;gml\&quot;&gt;&lt;coordinates xmlns=\&quot;gml\&quot; cs=\&quot;,\&quot; ts=\&quot; \&quot;&gt;27,37 27.1,36.9 27.2,36.8 27.3,36.6 27.4,36.5 27.5,36.4 27.6,36.3 27.7,36.2 27.8,36 27.9,35.9 28,35.8 28.1,35.7 28.2,35.6 28.3,35.5 28.4,35.4 28.5,35.3 28.7,35.2 28.8,35.1 28.9,35 29,34.9 29.1,34.8 29.3,34.7 29.4,34.6 29.5,34.6 29.7,34.5 29.8,34.4 29.9,34.3 30.1,34.3 30.2,34.2 30.3,34.1 30.5,34 30.6,34 30.7,33.9 30.9,33.9 31,33.8 31.2,33.7 31.3,33.7 31.5,33.6 31.6,33.6 31.8,33.6 31.9,33.5 32.1,33.5 32.2,33.4 32.4,33.4 32.5,33.4 32.7,33.3 32.8,33.3 33,33.3 33.1,33.3 33.3,33.2 33.4,33.2 33.6,33.2 33.7,33.2 33.9,33.2 34,33.2 34.2,33.2 34.3,33.2 34.5,33.2 34.6,33.2 34.8,33.2 34.9,33.2 35.1,33.2 35.3,33.3 35.4,33.3 35.6,33.3 35.7,33.3 35.9,33.3 36,33.4 36.2,33.4 36.3,33.4 36.5,33.5 36.6,33.5 36.8,33.6 36.9,33.6 37.1,33.7 37.2,33.7 37.3,33.8 37.5,33.8 37.6,33.9 37.8,33.9 37.9,34 38,34.1 38.2,34.1 38.3,34.2 38.5,34.3 38.6,34.3 38.7,34.4 38.9,34.5 39,34.6 39.1,34.7 39.2,34.7 39.4,34.8 39.5,34.9 39.6,35 39.7,35.1 39.9,35.2 40,35.3 40.1,35.4 40.2,35.5 40.3,35.6 40.4,35.7 40.5,35.8 40.6,35.9 40.7,36.1 40.8,36.2 40.9,36.3 41,36.4 41.1,36.5 41.2,36.6 41.3,36.8 41.4,36.9 41.5,37 41.6,37.1 41.7,37.3 41.8,37.4 41.8,37.5 41.9,37.7 42,37.8 42.1,37.9 42.1,38.1 42.2,38.2 42.3,38.3 42.3,38.5 42.4,38.6 42.4,38.8 42.5,38.9 42.6,39.1 42.6,39.2 42.6,39.4 42.7,39.5 42.7,39.6 42.8,39.8 42.8,39.9 42.8,40.1 42.9,40.2 42.9,40.4 42.9,40.5 43,40.7 43,40.9 43,41 43,41.2 43,41.3 43,41.5 43,41.6 43.1,41.8 43.1,41.9 43.1,42.1 43.1,42.2 43,42.4 43,42.5 43,42.7 43,42.8 43,43 43,43.1 43,43.3 42.9,43.5 42.9,43.6 42.9,43.8 42.8,43.9 42.8,44.1 42.8,44.2 42.7,44.4 42.7,44.5 42.6,44.6 42.6,44.8 42.6,44.9 42.5,45.1 42.4,45.2 42.4,45.4 42.3,45.5 42.3,45.7 42.2,45.8 42.1,45.9 42.1,46.1 42,46.2 41.9,46.3 41.8,46.5 41.8,46.6 41.7,46.7 41.6,46.9 41.5,47 41.4,47.1 41.3,47.2 41.2,47.4 41.1,47.5 41,47.6 40.9,47.7 40.8,47.8 40.7,47.9 40.6,48.1 40.5,48.2 40.4,48.3 40.3,48.4 40.2,48.5 40.1,48.6 40,48.7 39.9,48.8 39.7,48.9 39.6,49 39.5,49.1 39.4,49.2 39.2,49.3 39.1,49.3 39,49.4 38.9,49.5 38.7,49.6 38.6,49.7 38.5,49.7 38.3,49.8 38.2,49.9 38,49.9 37.9,50 37.8,50.1 37.6,50.1 37.5,50.2 37.3,50.2 37.2,50.3 37.1,50.3 36.9,50.4 36.8,50.4 36.6,50.5 36.5,50.5 36.3,50.6 36.2,50.6 36,50.6 35.9,50.7 35.7,50.7 35.6,50.7 35.4,50.7 35.3,50.7 35.1,50.8 34.9,50.8 34.8,50.8 34.6,50.8 34.5,50.8 34.3,50.8 34.2,50.8 34,50.8 33.9,50.8 33.7,50.8 33.6,50.8 33.4,50.8 33.3,50.8 33.1,50.7 33,50.7 32.8,50.7 32.7,50.7 32.5,50.6 32.4,50.6 32.2,50.6 32.1,50.5 31.9,50.5 31.8,50.4 31.6,50.4 31.5,50.4 31.3,50.3 31.2,50.3 31,50.2 30.9,50.1 30.7,50.1 30.6,50 30.5,50 30.3,49.9 30.2,49.8 30.1,49.7 29.9,49.7 29.8,49.6 29.7,49.5 29.5,49.4 29.4,49.4 29.3,49.3 29.1,49.2 29,49.1 28.9,49 28.8,48.9 28.7,48.8 28.5,48.7 28.4,48.6 28.3,48.5 28.2,48.4 28.1,48.3 28,48.2 27.9,48.1 27.8,48 27.7,47.8 27.6,47.7 27.5,47.6 27.4,47.5 27.3,47.4 27.2,47.2 27.1,47.1 27,47&lt;/coordinates&gt;&lt;/LineString&gt;&lt;/lineStringMember&gt;&lt;/MultiLineString&gt;&quot; ) );</span></a>
<a name="453"><span class="lineNum">     453 </span>                :<span class="lineCov">          1 :   QString res = elemToString( exportC.asGml2( doc, 1 ) );</span></a>
<a name="454"><span class="lineNum">     454 </span>                :<span class="lineCov">          3 :   QGSCOMPAREGML( res, expectedSimpleGML2 );</span></a>
<a name="455"><span class="lineNum">     455 </span>                :<span class="lineCov">          2 :   QString expectedGML2empty( QStringLiteral( &quot;&lt;MultiLineString xmlns=\&quot;gml\&quot;/&gt;&quot; ) );</span></a>
<a name="456"><span class="lineNum">     456 </span>                :<span class="lineCov">          3 :   QGSCOMPAREGML( elemToString( QgsMultiCurve().asGml2( doc ) ), expectedGML2empty );</span></a>
<a name="457"><span class="lineNum">     457 </span>                :            : </a>
<a name="458"><span class="lineNum">     458 </span>                :            :   //as GML3</a>
<a name="459"><span class="lineNum">     459 </span>                :<span class="lineCov">          2 :   QString expectedSimpleGML3( QStringLiteral( &quot;&lt;MultiCurve xmlns=\&quot;gml\&quot;&gt;&lt;curveMember xmlns=\&quot;gml\&quot;&gt;&lt;Curve xmlns=\&quot;gml\&quot;&gt;&lt;segments xmlns=\&quot;gml\&quot;&gt;&lt;ArcString xmlns=\&quot;gml\&quot;&gt;&lt;posList xmlns=\&quot;gml\&quot; srsDimension=\&quot;2\&quot;&gt;7 17 3 13 7 11&lt;/posList&gt;&lt;/ArcString&gt;&lt;/segments&gt;&lt;/Curve&gt;&lt;/curveMember&gt;&lt;curveMember xmlns=\&quot;gml\&quot;&gt;&lt;Curve xmlns=\&quot;gml\&quot;&gt;&lt;segments xmlns=\&quot;gml\&quot;&gt;&lt;ArcString xmlns=\&quot;gml\&quot;&gt;&lt;posList xmlns=\&quot;gml\&quot; srsDimension=\&quot;2\&quot;&gt;27 37 43 43 27 47&lt;/posList&gt;&lt;/ArcString&gt;&lt;/segments&gt;&lt;/Curve&gt;&lt;/curveMember&gt;&lt;/MultiCurve&gt;&quot; ) );</span></a>
<a name="460"><span class="lineNum">     460 </span>                :<span class="lineCov">          1 :   res = elemToString( exportC.asGml3( doc ) );</span></a>
<a name="461"><span class="lineNum">     461 </span>                :<span class="lineCov">          1 :   QCOMPARE( res, expectedSimpleGML3 );</span></a>
<a name="462"><span class="lineNum">     462 </span>                :<span class="lineCov">          2 :   QString expectedGML3empty( QStringLiteral( &quot;&lt;MultiCurve xmlns=\&quot;gml\&quot;/&gt;&quot; ) );</span></a>
<a name="463"><span class="lineNum">     463 </span>                :<span class="lineCov">          3 :   QGSCOMPAREGML( elemToString( QgsMultiCurve().asGml3( doc ) ), expectedGML3empty );</span></a>
<a name="464"><span class="lineNum">     464 </span>                :            : </a>
<a name="465"><span class="lineNum">     465 </span>                :            :   // as JSON</a>
<a name="466"><span class="lineNum">     466 </span>                :<span class="lineCov">          1 :   QString expectedSimpleJson( &quot;{\&quot;coordinates\&quot;:[[[7.0,17.0],[6.9,17.0],[6.9,17.0],[6.8,17.0],[6.8,17.1],[6.7,17.1],[6.7,17.1],[6.6,17.1],[6.6,17.1],[6.5,17.1],[6.5,17.1],[6.4,17.1],[6.4,17.1],[6.3,17.1],[6.2,17.2],[6.2,17.2],[6.1,17.2],[6.1,17.2],[6.0,17.2],[6.0,17.2],[5.9,17.2],[5.9,17.2],[5.8,17.2],[5.7,17.2],[5.7,17.1],[5.6,17.1],[5.6,17.1],[5.5,17.1],[5.5,17.1],[5.4,17.1],[5.4,17.1],[5.3,17.1],[5.3,17.1],[5.2,17.1],[5.2,17.0],[5.1,17.0],[5.0,17.0],[5.0,17.0],[4.9,17.0],[4.9,17.0],[4.8,16.9],[4.8,16.9],[4.7,16.9],[4.7,16.9],[4.6,16.9],[4.6,16.8],[4.5,16.8],[4.5,16.8],[4.4,16.8],[4.4,16.7],[4.3,16.7],[4.3,16.7],[4.3,16.6],[4.2,16.6],[4.2,16.6],[4.1,16.5],[4.1,16.5],[4.0,16.5],[4.0,16.4],[3.9,16.4],[3.9,16.4],[3.9,16.3],[3.8,16.3],[3.8,16.3],[3.7,16.2],[3.7,16.2],[3.7,16.1],[3.6,16.1],[3.6,16.1],[3.6,16.0],[3.5,16.0],[3.5,15.9],[3.5,15.9],[3.4,15.8],[3.4,15.8],[3.4,15.7],[3.3,15.7],[3.3,15.7],[3.3,15.6],[3.2,15.6],[3.2,15.5],[3.2,15.5],[3.2,15.4],[3.1,15.4],[3.1,15.3],[3.1,15.3],[3.1,15.2],[3.1,15.2],[3.0,15.1],[3.0,15.1],[3.0,15.0],[3.0,15.0],[3.0,14.9],[3.0,14.8],[2.9,14.8],[2.9,14.7],[2.9,14.7],[2.9,14.6],[2.9,14.6],[2.9,14.5],[2.9,14.5],[2.9,14.4],[2.9,14.4],[2.9,14.3],[2.8,14.2],[2.8,14.2],[2.8,14.1],[2.8,14.1],[2.8,14.0],[2.8,14.0],[2.8,13.9],[2.8,13.9],[2.8,13.8],[2.8,13.8],[2.9,13.7],[2.9,13.6],[2.9,13.6],[2.9,13.5],[2.9,13.5],[2.9,13.4],[2.9,13.4],[2.9,13.3],[2.9,13.3],[2.9,13.2],[3.0,13.2],[3.0,13.1],[3.0,13.0],[3.0,13.0],[3.0,12.9],[3.0,12.9],[3.1,12.8],[3.1,12.8],[3.1,12.7],[3.1,12.7],[3.1,12.6],[3.2,12.6],[3.2,12.5],[3.2,12.5],[3.2,12.4],[3.3,12.4],[3.3,12.3],[3.3,12.3],[3.4,12.3],[3.4,12.2],[3.4,12.2],[3.5,12.1],[3.5,12.1],[3.5,12.0],[3.6,12.0],[3.6,11.9],[3.6,11.9],[3.7,11.9],[3.7,11.8],[3.7,11.8],[3.8,11.7],[3.8,11.7],[3.9,11.7],[3.9,11.6],[3.9,11.6],[4.0,11.6],[4.0,11.5],[4.1,11.5],[4.1,11.5],[4.2,11.4],[4.2,11.4],[4.3,11.4],[4.3,11.3],[4.3,11.3],[4.4,11.3],[4.4,11.2],[4.5,11.2],[4.5,11.2],[4.6,11.2],[4.6,11.1],[4.7,11.1],[4.7,11.1],[4.8,11.1],[4.8,11.1],[4.9,11.0],[4.9,11.0],[5.0,11.0],[5.0,11.0],[5.1,11.0],[5.2,11.0],[5.2,10.9],[5.3,10.9],[5.3,10.9],[5.4,10.9],[5.4,10.9],[5.5,10.9],[5.5,10.9],[5.6,10.9],[5.6,10.9],[5.7,10.9],[5.7,10.8],[5.8,10.8],[5.9,10.8],[5.9,10.8],[6.0,10.8],[6.0,10.8],[6.1,10.8],[6.1,10.8],[6.2,10.8],[6.2,10.8],[6.3,10.9],[6.4,10.9],[6.4,10.9],[6.5,10.9],[6.5,10.9],[6.6,10.9],[6.6,10.9],[6.7,10.9],[6.7,10.9],[6.8,10.9],[6.8,11.0],[6.9,11.0],[6.9,11.0],[7.0,11.0]],[[27.0,37.0],[27.1,36.9],[27.2,36.8],[27.3,36.6],[27.4,36.5],[27.5,36.4],[27.6,36.3],[27.7,36.2],[27.8,36.0],[27.9,35.9],[28.0,35.8],[28.1,35.7],[28.2,35.6],[28.3,35.5],[28.4,35.4],[28.5,35.3],[28.7,35.2],[28.8,35.1],[28.9,35.0],[29.0,34.9],[29.1,34.8],[29.3,34.7],[29.4,34.6],[29.5,34.6],[29.7,34.5],[29.8,34.4],[29.9,34.3],[30.1,34.3],[30.2,34.2],[30.3,34.1],[30.5,34.0],[30.6,34.0],[30.7,33.9],[30.9,33.9],[31.0,33.8],[31.2,33.7],[31.3,33.7],[31.5,33.6],[31.6,33.6],[31.8,33.6],[31.9,33.5],[32.1,33.5],[32.2,33.4],[32.4,33.4],[32.5,33.4],[32.7,33.3],[32.8,33.3],[33.0,33.3],[33.1,33.3],[33.3,33.2],[33.4,33.2],[33.6,33.2],[33.7,33.2],[33.9,33.2],[34.0,33.2],[34.2,33.2],[34.3,33.2],[34.5,33.2],[34.6,33.2],[34.8,33.2],[34.9,33.2],[35.1,33.2],[35.3,33.3],[35.4,33.3],[35.6,33.3],[35.7,33.3],[35.9,33.3],[36.0,33.4],[36.2,33.4],[36.3,33.4],[36.5,33.5],[36.6,33.5],[36.8,33.6],[36.9,33.6],[37.1,33.7],[37.2,33.7],[37.3,33.8],[37.5,33.8],[37.6,33.9],[37.8,33.9],[37.9,34.0],[38.0,34.1],[38.2,34.1],[38.3,34.2],[38.5,34.3],[38.6,34.3],[38.7,34.4],[38.9,34.5],[39.0,34.6],[39.1,34.7],[39.2,34.7],[39.4,34.8],[39.5,34.9],[39.6,35.0],[39.7,35.1],[39.9,35.2],[40.0,35.3],[40.1,35.4],[40.2,35.5],[40.3,35.6],[40.4,35.7],[40.5,35.8],[40.6,35.9],[40.7,36.1],[40.8,36.2],[40.9,36.3],[41.0,36.4],[41.1,36.5],[41.2,36.6],[41.3,36.8],[41.4,36.9],[41.5,37.0],[41.6,37.1],[41.7,37.3],[41.8,37.4],[41.8,37.5],[41.9,37.7],[42.0,37.8],[42.1,37.9],[42.1,38.1],[42.2,38.2],[42.3,38.3],[42.3,38.5],[42.4,38.6],[42.4,38.8],[42.5,38.9],[42.6,39.1],[42.6,39.2],[42.6,39.4],[42.7,39.5],[42.7,39.6],[42.8,39.8],[42.8,39.9],[42.8,40.1],[42.9,40.2],[42.9,40.4],[42.9,40.5],[43.0,40.7],[43.0,40.9],[43.0,41.0],[43.0,41.2],[43.0,41.3],[43.0,41.5],[43.0,41.6],[43.1,41.8],[43.1,41.9],[43.1,42.1],[43.1,42.2],[43.0,42.4],[43.0,42.5],[43.0,42.7],[43.0,42.8],[43.0,43.0],[43.0,43.1],[43.0,43.3],[42.9,43.5],[42.9,43.6],[42.9,43.8],[42.8,43.9],[42.8,44.1],[42.8,44.2],[42.7,44.4],[42.7,44.5],[42.6,44.6],[42.6,44.8],[42.6,44.9],[42.5,45.1],[42.4,45.2],[42.4,45.4],[42.3,45.5],[42.3,45.7],[42.2,45.8],[42.1,45.9],[42.1,46.1],[42.0,46.2],[41.9,46.3],[41.8,46.5],[41.8,46.6],[41.7,46.7],[41.6,46.9],[41.5,47.0],[41.4,47.1],[41.3,47.2],[41.2,47.4],[41.1,47.5],[41.0,47.6],[40.9,47.7],[40.8,47.8],[40.7,47.9],[40.6,48.1],[40.5,48.2],[40.4,48.3],[40.3,48.4],[40.2,48.5],[40.1,48.6],[40.0,48.7],[39.9,48.8],[39.7,48.9],[39.6,49.0],[39.5,49.1],[39.4,49.2],[39.2,49.3],[39.1,49.3],[39.0,49.4],[38.9,49.5],[38.7,49.6],[38.6,49.7],[38.5,49.7],[38.3,49.8],[38.2,49.9],[38.0,49.9],[37.9,50.0],[37.8,50.1],[37.6,50.1],[37.5,50.2],[37.3,50.2],[37.2,50.3],[37.1,50.3],[36.9,50.4],[36.8,50.4],[36.6,50.5],[36.5,50.5],[36.3,50.6],[36.2,50.6],[36.0,50.6],[35.9,50.7],[35.7,50.7],[35.6,50.7],[35.4,50.7],[35.3,50.7],[35.1,50.8],[34.9,50.8],[34.8,50.8],[34.6,50.8],[34.5,50.8],[34.3,50.8],[34.2,50.8],[34.0,50.8],[33.9,50.8],[33.7,50.8],[33.6,50.8],[33.4,50.8],[33.3,50.8],[33.1,50.7],[33.0,50.7],[32.8,50.7],[32.7,50.7],[32.5,50.6],[32.4,50.6],[32.2,50.6],[32.1,50.5],[31.9,50.5],[31.8,50.4],[31.6,50.4],[31.5,50.4],[31.3,50.3],[31.2,50.3],[31.0,50.2],[30.9,50.1],[30.7,50.1],[30.6,50.0],[30.5,50.0],[30.3,49.9],[30.2,49.8],[30.1,49.7],[29.9,49.7],[29.8,49.6],[29.7,49.5],[29.5,49.4],[29.4,49.4],[29.3,49.3],[29.1,49.2],[29.0,49.1],[28.9,49.0],[28.8,48.9],[28.7,48.8],[28.5,48.7],[28.4,48.6],[28.3,48.5],[28.2,48.4],[28.1,48.3],[28.0,48.2],[27.9,48.1],[27.8,48.0],[27.7,47.8],[27.6,47.7],[27.5,47.6],[27.4,47.5],[27.3,47.4],[27.2,47.2],[27.1,47.1],[27.0,47.0]]],\&quot;type\&quot;:\&quot;MultiLineString\&quot;}&quot; );</span></a>
<a name="467"><span class="lineNum">     467 </span>                :<span class="lineCov">          1 :   res = exportC.asJson( 1 );</span></a>
<a name="468"><span class="lineNum">     468 </span>                :<span class="lineCov">          1 :   QCOMPARE( res, expectedSimpleJson );</span></a>
<a name="469"><span class="lineNum">     469 </span>                :            : </a>
<a name="470"><span class="lineNum">     470 </span>                :<span class="lineCov">          1 :   QgsMultiCurve exportFloat;</span></a>
<a name="471"><span class="lineNum">     471 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7 / 3.0, 17 / 3.0 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 3 / 5.0, 13 / 3.0 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 7 / 3.0, 11 / 3.0 ) ) ;</span></a>
<a name="472"><span class="lineNum">     472 </span>                :<span class="lineCov">          1 :   exportFloat.addGeometry( part.clone() );</span></a>
<a name="473"><span class="lineNum">     473 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::Point, 27 / 3.0, 37 / 9.0 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 43 / 41.0, 43 / 42.0 ) &lt;&lt; QgsPoint( QgsWkbTypes::Point, 27 / 3.0, 1 / 3.0 ) ) ;</span></a>
<a name="474"><span class="lineNum">     474 </span>                :<span class="lineCov">          1 :   exportFloat.addGeometry( part.clone() );</span></a>
<a name="475"><span class="lineNum">     475 </span>                :            : </a>
<a name="476"><span class="lineNum">     476 </span>                :<span class="lineCov">          2 :   QString expectedJsonPrec3( QStringLiteral( &quot;{\&quot;coordinates\&quot;:[[[2.333,5.667],[2.316,5.677],[2.298,5.687],[2.28,5.697],[2.262,5.707],[2.244,5.716],[2.226,5.725],[2.207,5.734],[2.188,5.742],[2.17,5.75],[2.151,5.757],[2.131,5.765],[2.112,5.772],[2.093,5.778],[2.074,5.785],[2.054,5.79],[2.034,5.796],[2.015,5.801],[1.995,5.806],[1.975,5.811],[1.955,5.815],[1.935,5.819],[1.915,5.822],[1.894,5.826],[1.874,5.828],[1.854,5.831],[1.834,5.833],[1.813,5.835],[1.793,5.836],[1.773,5.837],[1.752,5.838],[1.732,5.838],[1.711,5.838],[1.691,5.838],[1.67,5.837],[1.65,5.836],[1.63,5.834],[1.609,5.833],[1.589,5.83],[1.569,5.828],[1.548,5.825],[1.528,5.822],[1.508,5.818],[1.488,5.814],[1.468,5.81],[1.448,5.805],[1.428,5.801],[1.409,5.795],[1.389,5.79],[1.37,5.784],[1.35,5.777],[1.331,5.771],[1.312,5.764],[1.293,5.756],[1.274,5.749],[1.255,5.741],[1.236,5.732],[1.218,5.724],[1.199,5.715],[1.181,5.705],[1.163,5.696],[1.145,5.686],[1.128,5.676],[1.11,5.665],[1.093,5.654],[1.076,5.643],[1.059,5.632],[1.042,5.62],[1.025,5.608],[1.009,5.596],[0.993,5.583],[0.977,5.57],[0.962,5.557],[0.946,5.543],[0.931,5.53],[0.916,5.516],[0.901,5.502],[0.887,5.487],[0.873,5.473],[0.859,5.458],[0.845,5.442],[0.832,5.427],[0.819,5.411],[0.806,5.395],[0.793,5.379],[0.781,5.363],[0.769,5.346],[0.757,5.33],[0.746,5.313],[0.735,5.296],[0.724,5.278],[0.713,5.261],[0.703,5.243],[0.693,5.225],[0.684,5.207],[0.674,5.189],[0.666,5.171],[0.657,5.152],[0.649,5.133],[0.641,5.115],[0.633,5.096],[0.626,5.077],[0.619,5.057],[0.612,5.038],[0.606,5.019],[0.6,4.999],[0.594,4.979],[0.589,4.96],[0.584,4.94],[0.579,4.92],[0.575,4.9],[0.571,4.88],[0.568,4.86],[0.564,4.84],[0.562,4.819],[0.559,4.799],[0.557,4.779],[0.555,4.759],[0.554,4.738],[0.553,4.718],[0.552,4.697],[0.552,4.677],[0.552,4.656],[0.552,4.636],[0.553,4.616],[0.554,4.595],[0.555,4.575],[0.557,4.554],[0.559,4.534],[0.562,4.514],[0.564,4.494],[0.568,4.473],[0.571,4.453],[0.575,4.433],[0.579,4.413],[0.584,4.393],[0.589,4.374],[0.594,4.354],[0.6,4.334],[0.606,4.315],[0.612,4.295],[0.619,4.276],[0.626,4.257],[0.633,4.238],[0.641,4.219],[0.649,4.2],[0.657,4.181],[0.666,4.163],[0.674,4.144],[0.684,4.126],[0.693,4.108],[0.703,4.09],[0.713,4.073],[0.724,4.055],[0.735,4.038],[0.746,4.021],[0.757,4.004],[0.769,3.987],[0.781,3.97],[0.793,3.954],[0.806,3.938],[0.819,3.922],[0.832,3.906],[0.845,3.891],[0.859,3.876],[0.873,3.861],[0.887,3.846],[0.901,3.832],[0.916,3.817],[0.931,3.804],[0.946,3.79],[0.962,3.776],[0.977,3.763],[0.993,3.75],[1.009,3.738],[1.025,3.726],[1.042,3.713],[1.059,3.702],[1.076,3.69],[1.093,3.679],[1.11,3.668],[1.128,3.658],[1.145,3.648],[1.163,3.638],[1.181,3.628],[1.199,3.619],[1.218,3.61],[1.236,3.601],[1.255,3.593],[1.274,3.585],[1.293,3.577],[1.312,3.57],[1.331,3.563],[1.35,3.556],[1.37,3.55],[1.389,3.544],[1.409,3.538],[1.428,3.533],[1.448,3.528],[1.468,3.523],[1.488,3.519],[1.508,3.515],[1.528,3.511],[1.548,3.508],[1.569,3.505],[1.589,3.503],[1.609,3.501],[1.63,3.499],[1.65,3.497],[1.67,3.496],[1.691,3.496],[1.711,3.495],[1.732,3.495],[1.752,3.496],[1.773,3.496],[1.793,3.497],[1.813,3.499],[1.834,3.5],[1.854,3.503],[1.874,3.505],[1.894,3.508],[1.915,3.511],[1.935,3.514],[1.955,3.518],[1.975,3.523],[1.995,3.527],[2.015,3.532],[2.034,3.537],[2.054,3.543],[2.074,3.549],[2.093,3.555],[2.112,3.562],[2.131,3.569],[2.151,3.576],[2.17,3.584],[2.188,3.592],[2.207,3.6],[2.226,3.608],[2.244,3.617],[2.262,3.627],[2.28,3.636],[2.298,3.646],[2.316,3.656],[2.333,3.667]],[[9.0,4.111],[8.966,4.178],[8.932,4.244],[8.896,4.309],[8.859,4.374],[8.821,4.438],[8.782,4.502],[8.742,4.565],[8.7,4.627],[8.658,4.688],[8.614,4.749],[8.57,4.809],[8.524,4.868],[8.477,4.926],[8.43,4.983],[8.381,5.04],[8.331,5.096],[8.281,5.151],[8.229,5.205],[8.177,5.258],[8.124,5.31],[8.069,5.361],[8.014,5.411],[7.958,5.461],[7.901,5.509],[7.844,5.556],[7.785,5.603],[7.726,5.648],[7.666,5.692],[7.605,5.735],[7.543,5.777],[7.481,5.818],[7.418,5.858],[7.354,5.897],[7.29,5.935],[7.225,5.971],[7.159,6.007],[7.093,6.041],[7.026,6.074],[6.958,6.106],[6.89,6.137],[6.822,6.167],[6.753,6.195],[6.683,6.222],[6.613,6.248],[6.543,6.273],[6.472,6.296],[6.401,6.319],[6.329,6.34],[6.257,6.36],[6.185,6.378],[6.112,6.395],[6.04,6.411],[5.966,6.426],[5.893,6.44],[5.819,6.452],[5.746,6.463],[5.672,6.472],[5.597,6.48],[5.523,6.487],[5.449,6.493],[5.374,6.498],[5.3,6.501],[5.225,6.503],[5.15,6.503],[5.076,6.502],[5.001,6.5],[4.927,6.497],[4.852,6.492],[4.778,6.486],[4.704,6.479],[4.629,6.47],[4.555,6.46],[4.482,6.449],[4.408,6.437],[4.335,6.423],[4.262,6.408],[4.189,6.392],[4.116,6.374],[4.044,6.355],[3.972,6.335],[3.901,6.314],[3.83,6.292],[3.759,6.268],[3.688,6.243],[3.619,6.217],[3.549,6.189],[3.48,6.16],[3.412,6.131],[3.344,6.1],[3.277,6.067],[3.21,6.034],[3.144,5.999],[3.078,5.964],[3.013,5.927],[2.949,5.889],[2.886,5.85],[2.823,5.81],[2.761,5.768],[2.699,5.726],[2.638,5.683],[2.578,5.638],[2.519,5.593],[2.461,5.546],[2.403,5.499],[2.347,5.45],[2.291,5.401],[2.236,5.35],[2.182,5.299],[2.129,5.246],[2.076,5.193],[2.025,5.139],[1.975,5.084],[1.925,5.028],[1.877,4.971],[1.829,4.914],[1.783,4.855],[1.738,4.796],[1.693,4.736],[1.65,4.675],[1.608,4.614],[1.567,4.551],[1.527,4.488],[1.488,4.425],[1.45,4.36],[1.413,4.295],[1.378,4.23],[1.343,4.164],[1.31,4.097],[1.278,4.029],[1.247,3.961],[1.217,3.893],[1.189,3.824],[1.161,3.755],[1.135,3.685],[1.11,3.614],[1.087,3.544],[1.064,3.472],[1.043,3.401],[1.023,3.329],[1.004,3.257],[0.987,3.184],[0.971,3.111],[0.956,3.038],[0.942,2.965],[0.93,2.891],[0.919,2.817],[0.909,2.743],[0.901,2.669],[0.894,2.595],[0.888,2.52],[0.883,2.446],[0.88,2.371],[0.878,2.297],[0.878,2.222],[0.878,2.148],[0.88,2.073],[0.883,1.998],[0.888,1.924],[0.894,1.85],[0.901,1.775],[0.909,1.701],[0.919,1.627],[0.93,1.553],[0.942,1.48],[0.956,1.406],[0.971,1.333],[0.987,1.26],[1.004,1.188],[1.023,1.116],[1.043,1.044],[1.064,0.972],[1.087,0.901],[1.11,0.83],[1.135,0.76],[1.161,0.69],[1.189,0.62],[1.217,0.551],[1.247,0.483],[1.278,0.415],[1.31,0.348],[1.343,0.281],[1.378,0.215],[1.413,0.149],[1.45,0.084],[1.488,0.02],[1.527,-0.044],[1.567,-0.107],[1.608,-0.169],[1.65,-0.231],[1.693,-0.291],[1.738,-0.351],[1.783,-0.411],[1.829,-0.469],[1.877,-0.527],[1.925,-0.584],[1.975,-0.639],[2.025,-0.694],[2.076,-0.749],[2.129,-0.802],[2.182,-0.854],[2.236,-0.906],[2.291,-0.956],[2.347,-1.006],[2.403,-1.054],[2.461,-1.102],[2.519,-1.148],[2.578,-1.194],[2.638,-1.238],[2.699,-1.282],[2.761,-1.324],[2.823,-1.365],[2.886,-1.405],[2.949,-1.444],[3.013,-1.482],[3.078,-1.519],[3.144,-1.555],[3.21,-1.589],[3.277,-1.623],[3.344,-1.655],[3.412,-1.686],[3.48,-1.716],[3.549,-1.745],[3.619,-1.772],[3.688,-1.798],[3.759,-1.823],[3.83,-1.847],[3.901,-1.87],[3.972,-1.891],[4.044,-1.911],[4.116,-1.93],[4.189,-1.947],[4.262,-1.964],[4.335,-1.979],[4.408,-1.992],[4.482,-2.005],[4.555,-2.016],[4.629,-2.026],[4.704,-2.034],[4.778,-2.042],[4.852,-2.048],[4.927,-2.052],[5.001,-2.056],[5.076,-2.058],[5.15,-2.059],[5.225,-2.058],[5.3,-2.056],[5.374,-2.053],[5.449,-2.049],[5.523,-2.043],[5.597,-2.036],[5.672,-2.028],[5.746,-2.018],[5.819,-2.007],[5.893,-1.995],[5.966,-1.982],[6.04,-1.967],[6.112,-1.951],[6.185,-1.934],[6.257,-1.915],[6.329,-1.895],[6.401,-1.874],[6.472,-1.852],[6.543,-1.829],[6.613,-1.804],[6.683,-1.778],[6.753,-1.751],[6.822,-1.722],[6.89,-1.693],[6.958,-1.662],[7.026,-1.63],[7.093,-1.597],[7.159,-1.562],[7.225,-1.527],[7.29,-1.49],[7.354,-1.453],[7.418,-1.414],[7.481,-1.374],[7.543,-1.333],[7.605,-1.291],[7.666,-1.248],[7.726,-1.203],[7.785,-1.158],[7.844,-1.112],[7.901,-1.065],[7.958,-1.016],[8.014,-0.967],[8.069,-0.917],[8.124,-0.865],[8.177,-0.813],[8.229,-0.76],[8.281,-0.706],[8.331,-0.651],[8.381,-0.596],[8.43,-0.539],[8.477,-0.482],[8.524,-0.423],[8.57,-0.364],[8.614,-0.304],[8.658,-0.244],[8.7,-0.182],[8.742,-0.12],[8.782,-0.057],[8.821,0.006],[8.859,0.07],[8.896,0.135],[8.932,0.201],[8.966,0.267],[9.0,0.333]]],\&quot;type\&quot;:\&quot;MultiLineString\&quot;}&quot; ) );</span></a>
<a name="477"><span class="lineNum">     477 </span>                :<span class="lineCov">          1 :   res = exportFloat.asJson( 3 );</span></a>
<a name="478"><span class="lineNum">     478 </span>                :<span class="lineCov">          1 :   QCOMPARE( res, expectedJsonPrec3 );</span></a>
<a name="479"><span class="lineNum">     479 </span>                :            : </a>
<a name="480"><span class="lineNum">     480 </span>                :            :   // as GML2</a>
<a name="481"><span class="lineNum">     481 </span>                :<span class="lineCov">          2 :   QString expectedGML2prec3( QStringLiteral( &quot;&lt;MultiLineString xmlns=\&quot;gml\&quot;&gt;&lt;lineStringMember xmlns=\&quot;gml\&quot;&gt;&lt;LineString xmlns=\&quot;gml\&quot;&gt;&lt;coordinates xmlns=\&quot;gml\&quot; cs=\&quot;,\&quot; ts=\&quot; \&quot;&gt;2.333,5.667 2.316,5.677 2.298,5.687 2.28,5.697 2.262,5.707 2.244,5.716 2.226,5.725 2.207,5.734 2.188,5.742 2.17,5.75 2.151,5.757 2.131,5.765 2.112,5.772 2.093,5.778 2.074,5.785 2.054,5.79 2.034,5.796 2.015,5.801 1.995,5.806 1.975,5.811 1.955,5.815 1.935,5.819 1.915,5.822 1.894,5.826 1.874,5.828 1.854,5.831 1.834,5.833 1.813,5.835 1.793,5.836 1.773,5.837 1.752,5.838 1.732,5.838 1.711,5.838 1.691,5.838 1.67,5.837 1.65,5.836 1.63,5.834 1.609,5.833 1.589,5.83 1.569,5.828 1.548,5.825 1.528,5.822 1.508,5.818 1.488,5.814 1.468,5.81 1.448,5.805 1.428,5.801 1.409,5.795 1.389,5.79 1.37,5.784 1.35,5.777 1.331,5.771 1.312,5.764 1.293,5.756 1.274,5.749 1.255,5.741 1.236,5.732 1.218,5.724 1.199,5.715 1.181,5.705 1.163,5.696 1.145,5.686 1.128,5.676 1.11,5.665 1.093,5.654 1.076,5.643 1.059,5.632 1.042,5.62 1.025,5.608 1.009,5.596 0.993,5.583 0.977,5.57 0.962,5.557 0.946,5.543 0.931,5.53 0.916,5.516 0.901,5.502 0.887,5.487 0.873,5.473 0.859,5.458 0.845,5.442 0.832,5.427 0.819,5.411 0.806,5.395 0.793,5.379 0.781,5.363 0.769,5.346 0.757,5.33 0.746,5.313 0.735,5.296 0.724,5.278 0.713,5.261 0.703,5.243 0.693,5.225 0.684,5.207 0.674,5.189 0.666,5.171 0.657,5.152 0.649,5.133 0.641,5.115 0.633,5.096 0.626,5.077 0.619,5.057 0.612,5.038 0.606,5.019 0.6,4.999 0.594,4.979 0.589,4.96 0.584,4.94 0.579,4.92 0.575,4.9 0.571,4.88 0.568,4.86 0.564,4.84 0.562,4.819 0.559,4.799 0.557,4.779 0.555,4.759 0.554,4.738 0.553,4.718 0.552,4.697 0.552,4.677 0.552,4.656 0.552,4.636 0.553,4.616 0.554,4.595 0.555,4.575 0.557,4.554 0.559,4.534 0.562,4.514 0.564,4.494 0.568,4.473 0.571,4.453 0.575,4.433 0.579,4.413 0.584,4.393 0.589,4.374 0.594,4.354 0.6,4.334 0.606,4.315 0.612,4.295 0.619,4.276 0.626,4.257 0.633,4.238 0.641,4.219 0.649,4.2 0.657,4.181 0.666,4.163 0.674,4.144 0.684,4.126 0.693,4.108 0.703,4.09 0.713,4.073 0.724,4.055 0.735,4.038 0.746,4.021 0.757,4.004 0.769,3.987 0.781,3.97 0.793,3.954 0.806,3.938 0.819,3.922 0.832,3.906 0.845,3.891 0.859,3.876 0.873,3.861 0.887,3.846 0.901,3.832 0.916,3.817 0.931,3.804 0.946,3.79 0.962,3.776 0.977,3.763 0.993,3.75 1.009,3.738 1.025,3.726 1.042,3.713 1.059,3.702 1.076,3.69 1.093,3.679 1.11,3.668 1.128,3.658 1.145,3.648 1.163,3.638 1.181,3.628 1.199,3.619 1.218,3.61 1.236,3.601 1.255,3.593 1.274,3.585 1.293,3.577 1.312,3.57 1.331,3.563 1.35,3.556 1.37,3.55 1.389,3.544 1.409,3.538 1.428,3.533 1.448,3.528 1.468,3.523 1.488,3.519 1.508,3.515 1.528,3.511 1.548,3.508 1.569,3.505 1.589,3.503 1.609,3.501 1.63,3.499 1.65,3.497 1.67,3.496 1.691,3.496 1.711,3.495 1.732,3.495 1.752,3.496 1.773,3.496 1.793,3.497 1.813,3.499 1.834,3.5 1.854,3.503 1.874,3.505 1.894,3.508 1.915,3.511 1.935,3.514 1.955,3.518 1.975,3.523 1.995,3.527 2.015,3.532 2.034,3.537 2.054,3.543 2.074,3.549 2.093,3.555 2.112,3.562 2.131,3.569 2.151,3.576 2.17,3.584 2.188,3.592 2.207,3.6 2.226,3.608 2.244,3.617 2.262,3.627 2.28,3.636 2.298,3.646 2.316,3.656 2.333,3.667&lt;/coordinates&gt;&lt;/LineString&gt;&lt;/lineStringMember&gt;&lt;lineStringMember xmlns=\&quot;gml\&quot;&gt;&lt;LineString xmlns=\&quot;gml\&quot;&gt;&lt;coordinates xmlns=\&quot;gml\&quot; cs=\&quot;,\&quot; ts=\&quot; \&quot;&gt;9,4.111 8.966,4.178 8.932,4.244 8.896,4.309 8.859,4.374 8.821,4.438 8.782,4.502 8.742,4.565 8.7,4.627 8.658,4.688 8.614,4.749 8.57,4.809 8.524,4.868 8.477,4.926 8.43,4.983 8.381,5.04 8.331,5.096 8.281,5.151 8.229,5.205 8.177,5.258 8.124,5.31 8.069,5.361 8.014,5.411 7.958,5.461 7.901,5.509 7.844,5.556 7.785,5.603 7.726,5.648 7.666,5.692 7.605,5.735 7.543,5.777 7.481,5.818 7.418,5.858 7.354,5.897 7.29,5.935 7.225,5.971 7.159,6.007 7.093,6.041 7.026,6.074 6.958,6.106 6.89,6.137 6.822,6.167 6.753,6.195 6.683,6.222 6.613,6.248 6.543,6.273 6.472,6.296 6.401,6.319 6.329,6.34 6.257,6.36 6.185,6.378 6.112,6.395 6.04,6.411 5.966,6.426 5.893,6.44 5.819,6.452 5.746,6.463 5.672,6.472 5.597,6.48 5.523,6.487 5.449,6.493 5.374,6.498 5.3,6.501 5.225,6.503 5.15,6.503 5.076,6.502 5.001,6.5 4.927,6.497 4.852,6.492 4.778,6.486 4.704,6.479 4.629,6.47 4.555,6.46 4.482,6.449 4.408,6.437 4.335,6.423 4.262,6.408 4.189,6.392 4.116,6.374 4.044,6.355 3.972,6.335 3.901,6.314 3.83,6.292 3.759,6.268 3.688,6.243 3.619,6.217 3.549,6.189 3.48,6.16 3.412,6.131 3.344,6.1 3.277,6.067 3.21,6.034 3.144,5.999 3.078,5.964 3.013,5.927 2.949,5.889 2.886,5.85 2.823,5.81 2.761,5.768 2.699,5.726 2.638,5.683 2.578,5.638 2.519,5.593 2.461,5.546 2.403,5.499 2.347,5.45 2.291,5.401 2.236,5.35 2.182,5.299 2.129,5.246 2.076,5.193 2.025,5.139 1.975,5.084 1.925,5.028 1.877,4.971 1.829,4.914 1.783,4.855 1.738,4.796 1.693,4.736 1.65,4.675 1.608,4.614 1.567,4.551 1.527,4.488 1.488,4.425 1.45,4.36 1.413,4.295 1.378,4.23 1.343,4.164 1.31,4.097 1.278,4.029 1.247,3.961 1.217,3.893 1.189,3.824 1.161,3.755 1.135,3.685 1.11,3.614 1.087,3.544 1.064,3.472 1.043,3.401 1.023,3.329 1.004,3.257 0.987,3.184 0.971,3.111 0.956,3.038 0.942,2.965 0.93,2.891 0.919,2.817 0.909,2.743 0.901,2.669 0.894,2.595 0.888,2.52 0.883,2.446 0.88,2.371 0.878,2.297 0.878,2.222 0.878,2.148 0.88,2.073 0.883,1.998 0.888,1.924 0.894,1.85 0.901,1.775 0.909,1.701 0.919,1.627 0.93,1.553 0.942,1.48 0.956,1.406 0.971,1.333 0.987,1.26 1.004,1.188 1.023,1.116 1.043,1.044 1.064,0.972 1.087,0.901 1.11,0.83 1.135,0.76 1.161,0.69 1.189,0.62 1.217,0.551 1.247,0.483 1.278,0.415 1.31,0.348 1.343,0.281 1.378,0.215 1.413,0.149 1.45,0.084 1.488,0.02 1.527,-0.044 1.567,-0.107 1.608,-0.169 1.65,-0.231 1.693,-0.291 1.738,-0.351 1.783,-0.411 1.829,-0.469 1.877,-0.527 1.925,-0.584 1.975,-0.639 2.025,-0.694 2.076,-0.749 2.129,-0.802 2.182,-0.854 2.236,-0.906 2.291,-0.956 2.347,-1.006 2.403,-1.054 2.461,-1.102 2.519,-1.148 2.578,-1.194 2.638,-1.238 2.699,-1.282 2.761,-1.324 2.823,-1.365 2.886,-1.405 2.949,-1.444 3.013,-1.482 3.078,-1.519 3.144,-1.555 3.21,-1.589 3.277,-1.623 3.344,-1.655 3.412,-1.686 3.48,-1.716 3.549,-1.745 3.619,-1.772 3.688,-1.798 3.759,-1.823 3.83,-1.847 3.901,-1.87 3.972,-1.891 4.044,-1.911 4.116,-1.93 4.189,-1.947 4.262,-1.964 4.335,-1.979 4.408,-1.992 4.482,-2.005 4.555,-2.016 4.629,-2.026 4.704,-2.034 4.778,-2.042 4.852,-2.048 4.927,-2.052 5.001,-2.056 5.076,-2.058 5.15,-2.059 5.225,-2.058 5.3,-2.056 5.374,-2.053 5.449,-2.049 5.523,-2.043 5.597,-2.036 5.672,-2.028 5.746,-2.018 5.819,-2.007 5.893,-1.995 5.966,-1.982 6.04,-1.967 6.112,-1.951 6.185,-1.934 6.257,-1.915 6.329,-1.895 6.401,-1.874 6.472,-1.852 6.543,-1.829 6.613,-1.804 6.683,-1.778 6.753,-1.751 6.822,-1.722 6.89,-1.693 6.958,-1.662 7.026,-1.63 7.093,-1.597 7.159,-1.562 7.225,-1.527 7.29,-1.49 7.354,-1.453 7.418,-1.414 7.481,-1.374 7.543,-1.333 7.605,-1.291 7.666,-1.248 7.726,-1.203 7.785,-1.158 7.844,-1.112 7.901,-1.065 7.958,-1.016 8.014,-0.967 8.069,-0.917 8.124,-0.865 8.177,-0.813 8.229,-0.76 8.281,-0.706 8.331,-0.651 8.381,-0.596 8.43,-0.539 8.477,-0.482 8.524,-0.423 8.57,-0.364 8.614,-0.304 8.658,-0.244 8.7,-0.182 8.742,-0.12 8.782,-0.057 8.821,0.006 8.859,0.07 8.896,0.135 8.932,0.201 8.966,0.267 9,0.333&lt;/coordinates&gt;&lt;/LineString&gt;&lt;/lineStringMember&gt;&lt;/MultiLineString&gt;&quot; ) );</span></a>
<a name="482"><span class="lineNum">     482 </span>                :<span class="lineCov">          1 :   res = elemToString( exportFloat.asGml2( doc, 3 ) );</span></a>
<a name="483"><span class="lineNum">     483 </span>                :<span class="lineCov">          3 :   QGSCOMPAREGML( res, expectedGML2prec3 );</span></a>
<a name="484"><span class="lineNum">     484 </span>                :            : </a>
<a name="485"><span class="lineNum">     485 </span>                :            :   //as GML3</a>
<a name="486"><span class="lineNum">     486 </span>                :<span class="lineCov">          2 :   QString expectedGML3prec3( QStringLiteral( &quot;&lt;MultiCurve xmlns=\&quot;gml\&quot;&gt;&lt;curveMember xmlns=\&quot;gml\&quot;&gt;&lt;Curve xmlns=\&quot;gml\&quot;&gt;&lt;segments xmlns=\&quot;gml\&quot;&gt;&lt;ArcString xmlns=\&quot;gml\&quot;&gt;&lt;posList xmlns=\&quot;gml\&quot; srsDimension=\&quot;2\&quot;&gt;2.333 5.667 0.6 4.333 2.333 3.667&lt;/posList&gt;&lt;/ArcString&gt;&lt;/segments&gt;&lt;/Curve&gt;&lt;/curveMember&gt;&lt;curveMember xmlns=\&quot;gml\&quot;&gt;&lt;Curve xmlns=\&quot;gml\&quot;&gt;&lt;segments xmlns=\&quot;gml\&quot;&gt;&lt;ArcString xmlns=\&quot;gml\&quot;&gt;&lt;posList xmlns=\&quot;gml\&quot; srsDimension=\&quot;2\&quot;&gt;9 4.111 1.049 1.024 9 0.333&lt;/posList&gt;&lt;/ArcString&gt;&lt;/segments&gt;&lt;/Curve&gt;&lt;/curveMember&gt;&lt;/MultiCurve&gt;&quot; ) );</span></a>
<a name="487"><span class="lineNum">     487 </span>                :<span class="lineCov">          1 :   res = elemToString( exportFloat.asGml3( doc, 3 ) );</span></a>
<a name="488"><span class="lineNum">     488 </span>                :<span class="lineCov">          1 :   QCOMPARE( res, expectedGML3prec3 );</span></a>
<a name="489"><span class="lineNum">     489 </span>                :            : </a>
<a name="490"><span class="lineNum">     490 </span>                :            :   //asKML</a>
<a name="491"><span class="lineNum">     491 </span>                :<span class="lineCov">          2 :   QString expectedKml( QStringLiteral( &quot;&lt;MultiGeometry&gt;&lt;LineString&gt;&lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;&lt;coordinates&gt;7,17,0 6.9,17,0 6.9,17,0 6.8,17,0 6.8,17.1,0 6.7,17.1,0 6.7,17.1,0 6.6,17.1,0 6.6,17.1,0 6.5,17.1,0 6.5,17.1,0 6.4,17.1,0 6.4,17.1,0 6.3,17.1,0 6.2,17.2,0 6.2,17.2,0 6.1,17.2,0 6.1,17.2,0 6,17.2,0 6,17.2,0 5.9,17.2,0 5.9,17.2,0 5.8,17.2,0 5.7,17.2,0 5.7,17.1,0 5.6,17.1,0 5.6,17.1,0 5.5,17.1,0 5.5,17.1,0 5.4,17.1,0 5.4,17.1,0 5.3,17.1,0 5.3,17.1,0 5.2,17.1,0 5.2,17,0 5.1,17,0 5,17,0 5,17,0 4.9,17,0 4.9,17,0 4.8,16.9,0 4.8,16.9,0 4.7,16.9,0 4.7,16.9,0 4.6,16.9,0 4.6,16.8,0 4.5,16.8,0 4.5,16.8,0 4.4,16.8,0 4.4,16.7,0 4.3,16.7,0 4.3,16.7,0 4.3,16.6,0 4.2,16.6,0 4.2,16.6,0 4.1,16.5,0 4.1,16.5,0 4,16.5,0 4,16.4,0 3.9,16.4,0 3.9,16.4,0 3.9,16.3,0 3.8,16.3,0 3.8,16.3,0 3.7,16.2,0 3.7,16.2,0 3.7,16.1,0 3.6,16.1,0 3.6,16.1,0 3.6,16,0 3.5,16,0 3.5,15.9,0 3.5,15.9,0 3.4,15.8,0 3.4,15.8,0 3.4,15.7,0 3.3,15.7,0 3.3,15.7,0 3.3,15.6,0 3.2,15.6,0 3.2,15.5,0 3.2,15.5,0 3.2,15.4,0 3.1,15.4,0 3.1,15.3,0 3.1,15.3,0 3.1,15.2,0 3.1,15.2,0 3,15.1,0 3,15.1,0 3,15,0 3,15,0 3,14.9,0 3,14.8,0 2.9,14.8,0 2.9,14.7,0 2.9,14.7,0 2.9,14.6,0 2.9,14.6,0 2.9,14.5,0 2.9,14.5,0 2.9,14.4,0 2.9,14.4,0 2.9,14.3,0 2.8,14.2,0 2.8,14.2,0 2.8,14.1,0 2.8,14.1,0 2.8,14,0 2.8,14,0 2.8,13.9,0 2.8,13.9,0 2.8,13.8,0 2.8,13.8,0 2.9,13.7,0 2.9,13.6,0 2.9,13.6,0 2.9,13.5,0 2.9,13.5,0 2.9,13.4,0 2.9,13.4,0 2.9,13.3,0 2.9,13.3,0 2.9,13.2,0 3,13.2,0 3,13.1,0 3,13,0 3,13,0 3,12.9,0 3,12.9,0 3.1,12.8,0 3.1,12.8,0 3.1,12.7,0 3.1,12.7,0 3.1,12.6,0 3.2,12.6,0 3.2,12.5,0 3.2,12.5,0 3.2,12.4,0 3.3,12.4,0 3.3,12.3,0 3.3,12.3,0 3.4,12.3,0 3.4,12.2,0 3.4,12.2,0 3.5,12.1,0 3.5,12.1,0 3.5,12,0 3.6,12,0 3.6,11.9,0 3.6,11.9,0 3.7,11.9,0 3.7,11.8,0 3.7,11.8,0 3.8,11.7,0 3.8,11.7,0 3.9,11.7,0 3.9,11.6,0 3.9,11.6,0 4,11.6,0 4,11.5,0 4.1,11.5,0 4.1,11.5,0 4.2,11.4,0 4.2,11.4,0 4.3,11.4,0 4.3,11.3,0 4.3,11.3,0 4.4,11.3,0 4.4,11.2,0 4.5,11.2,0 4.5,11.2,0 4.6,11.2,0 4.6,11.1,0 4.7,11.1,0 4.7,11.1,0 4.8,11.1,0 4.8,11.1,0 4.9,11,0 4.9,11,0 5,11,0 5,11,0 5.1,11,0 5.2,11,0 5.2,10.9,0 5.3,10.9,0 5.3,10.9,0 5.4,10.9,0 5.4,10.9,0 5.5,10.9,0 5.5,10.9,0 5.6,10.9,0 5.6,10.9,0 5.7,10.9,0 5.7,10.8,0 5.8,10.8,0 5.9,10.8,0 5.9,10.8,0 6,10.8,0 6,10.8,0 6.1,10.8,0 6.1,10.8,0 6.2,10.8,0 6.2,10.8,0 6.3,10.9,0 6.4,10.9,0 6.4,10.9,0 6.5,10.9,0 6.5,10.9,0 6.6,10.9,0 6.6,10.9,0 6.7,10.9,0 6.7,10.9,0 6.8,10.9,0 6.8,11,0 6.9,11,0 6.9,11,0 7,11,0&lt;/coordinates&gt;&lt;/LineString&gt;&lt;LineString&gt;&lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;&lt;coordinates&gt;27,37,0 27.1,36.9,0 27.2,36.8,0 27.3,36.6,0 27.4,36.5,0 27.5,36.4,0 27.6,36.3,0 27.7,36.2,0 27.8,36,0 27.9,35.9,0 28,35.8,0 28.1,35.7,0 28.2,35.6,0 28.3,35.5,0 28.4,35.4,0 28.5,35.3,0 28.7,35.2,0 28.8,35.1,0 28.9,35,0 29,34.9,0 29.1,34.8,0 29.3,34.7,0 29.4,34.6,0 29.5,34.6,0 29.7,34.5,0 29.8,34.4,0 29.9,34.3,0 30.1,34.3,0 30.2,34.2,0 30.3,34.1,0 30.5,34,0 30.6,34,0 30.7,33.9,0 30.9,33.9,0 31,33.8,0 31.2,33.7,0 31.3,33.7,0 31.5,33.6,0 31.6,33.6,0 31.8,33.6,0 31.9,33.5,0 32.1,33.5,0 32.2,33.4,0 32.4,33.4,0 32.5,33.4,0 32.7,33.3,0 32.8,33.3,0 33,33.3,0 33.1,33.3,0 33.3,33.2,0 33.4,33.2,0 33.6,33.2,0 33.7,33.2,0 33.9,33.2,0 34,33.2,0 34.2,33.2,0 34.3,33.2,0 34.5,33.2,0 34.6,33.2,0 34.8,33.2,0 34.9,33.2,0 35.1,33.2,0 35.3,33.3,0 35.4,33.3,0 35.6,33.3,0 35.7,33.3,0 35.9,33.3,0 36,33.4,0 36.2,33.4,0 36.3,33.4,0 36.5,33.5,0 36.6,33.5,0 36.8,33.6,0 36.9,33.6,0 37.1,33.7,0 37.2,33.7,0 37.3,33.8,0 37.5,33.8,0 37.6,33.9,0 37.8,33.9,0 37.9,34,0 38,34.1,0 38.2,34.1,0 38.3,34.2,0 38.5,34.3,0 38.6,34.3,0 38.7,34.4,0 38.9,34.5,0 39,34.6,0 39.1,34.7,0 39.2,34.7,0 39.4,34.8,0 39.5,34.9,0 39.6,35,0 39.7,35.1,0 39.9,35.2,0 40,35.3,0 40.1,35.4,0 40.2,35.5,0 40.3,35.6,0 40.4,35.7,0 40.5,35.8,0 40.6,35.9,0 40.7,36.1,0 40.8,36.2,0 40.9,36.3,0 41,36.4,0 41.1,36.5,0 41.2,36.6,0 41.3,36.8,0 41.4,36.9,0 41.5,37,0 41.6,37.1,0 41.7,37.3,0 41.8,37.4,0 41.8,37.5,0 41.9,37.7,0 42,37.8,0 42.1,37.9,0 42.1,38.1,0 42.2,38.2,0 42.3,38.3,0 42.3,38.5,0 42.4,38.6,0 42.4,38.8,0 42.5,38.9,0 42.6,39.1,0 42.6,39.2,0 42.6,39.4,0 42.7,39.5,0 42.7,39.6,0 42.8,39.8,0 42.8,39.9,0 42.8,40.1,0 42.9,40.2,0 42.9,40.4,0 42.9,40.5,0 43,40.7,0 43,40.9,0 43,41,0 43,41.2,0 43,41.3,0 43,41.5,0 43,41.6,0 43.1,41.8,0 43.1,41.9,0 43.1,42.1,0 43.1,42.2,0 43,42.4,0 43,42.5,0 43,42.7,0 43,42.8,0 43,43,0 43,43.1,0 43,43.3,0 42.9,43.5,0 42.9,43.6,0 42.9,43.8,0 42.8,43.9,0 42.8,44.1,0 42.8,44.2,0 42.7,44.4,0 42.7,44.5,0 42.6,44.6,0 42.6,44.8,0 42.6,44.9,0 42.5,45.1,0 42.4,45.2,0 42.4,45.4,0 42.3,45.5,0 42.3,45.7,0 42.2,45.8,0 42.1,45.9,0 42.1,46.1,0 42,46.2,0 41.9,46.3,0 41.8,46.5,0 41.8,46.6,0 41.7,46.7,0 41.6,46.9,0 41.5,47,0 41.4,47.1,0 41.3,47.2,0 41.2,47.4,0 41.1,47.5,0 41,47.6,0 40.9,47.7,0 40.8,47.8,0 40.7,47.9,0 40.6,48.1,0 40.5,48.2,0 40.4,48.3,0 40.3,48.4,0 40.2,48.5,0 40.1,48.6,0 40,48.7,0 39.9,48.8,0 39.7,48.9,0 39.6,49,0 39.5,49.1,0 39.4,49.2,0 39.2,49.3,0 39.1,49.3,0 39,49.4,0 38.9,49.5,0 38.7,49.6,0 38.6,49.7,0 38.5,49.7,0 38.3,49.8,0 38.2,49.9,0 38,49.9,0 37.9,50,0 37.8,50.1,0 37.6,50.1,0 37.5,50.2,0 37.3,50.2,0 37.2,50.3,0 37.1,50.3,0 36.9,50.4,0 36.8,50.4,0 36.6,50.5,0 36.5,50.5,0 36.3,50.6,0 36.2,50.6,0 36,50.6,0 35.9,50.7,0 35.7,50.7,0 35.6,50.7,0 35.4,50.7,0 35.3,50.7,0 35.1,50.8,0 34.9,50.8,0 34.8,50.8,0 34.6,50.8,0 34.5,50.8,0 34.3,50.8,0 34.2,50.8,0 34,50.8,0 33.9,50.8,0 33.7,50.8,0 33.6,50.8,0 33.4,50.8,0 33.3,50.8,0 33.1,50.7,0 33,50.7,0 32.8,50.7,0 32.7,50.7,0 32.5,50.6,0 32.4,50.6,0 32.2,50.6,0 32.1,50.5,0 31.9,50.5,0 31.8,50.4,0 31.6,50.4,0 31.5,50.4,0 31.3,50.3,0 31.2,50.3,0 31,50.2,0 30.9,50.1,0 30.7,50.1,0 30.6,50,0 30.5,50,0 30.3,49.9,0 30.2,49.8,0 30.1,49.7,0 29.9,49.7,0 29.8,49.6,0 29.7,49.5,0 29.5,49.4,0 29.4,49.4,0 29.3,49.3,0 29.1,49.2,0 29,49.1,0 28.9,49,0 28.8,48.9,0 28.7,48.8,0 28.5,48.7,0 28.4,48.6,0 28.3,48.5,0 28.2,48.4,0 28.1,48.3,0 28,48.2,0 27.9,48.1,0 27.8,48,0 27.7,47.8,0 27.6,47.7,0 27.5,47.6,0 27.4,47.5,0 27.3,47.4,0 27.2,47.2,0 27.1,47.1,0 27,47,0&lt;/coordinates&gt;&lt;/LineString&gt;&lt;/MultiGeometry&gt;&quot; ) );</span></a>
<a name="492"><span class="lineNum">     492 </span>                :<span class="lineCov">          1 :   QCOMPARE( exportC.asKml( 1 ), expectedKml );</span></a>
<a name="493"><span class="lineNum">     493 </span>                :<span class="lineCov">          2 :   QString expectedKmlPrec3( QStringLiteral( &quot;&lt;MultiGeometry&gt;&lt;LineString&gt;&lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;&lt;coordinates&gt;2.333,5.667,0 2.316,5.677,0 2.298,5.687,0 2.28,5.697,0 2.262,5.707,0 2.244,5.716,0 2.226,5.725,0 2.207,5.734,0 2.188,5.742,0 2.17,5.75,0 2.151,5.757,0 2.131,5.765,0 2.112,5.772,0 2.093,5.778,0 2.074,5.785,0 2.054,5.79,0 2.034,5.796,0 2.015,5.801,0 1.995,5.806,0 1.975,5.811,0 1.955,5.815,0 1.935,5.819,0 1.915,5.822,0 1.894,5.826,0 1.874,5.828,0 1.854,5.831,0 1.834,5.833,0 1.813,5.835,0 1.793,5.836,0 1.773,5.837,0 1.752,5.838,0 1.732,5.838,0 1.711,5.838,0 1.691,5.838,0 1.67,5.837,0 1.65,5.836,0 1.63,5.834,0 1.609,5.833,0 1.589,5.83,0 1.569,5.828,0 1.548,5.825,0 1.528,5.822,0 1.508,5.818,0 1.488,5.814,0 1.468,5.81,0 1.448,5.805,0 1.428,5.801,0 1.409,5.795,0 1.389,5.79,0 1.37,5.784,0 1.35,5.777,0 1.331,5.771,0 1.312,5.764,0 1.293,5.756,0 1.274,5.749,0 1.255,5.741,0 1.236,5.732,0 1.218,5.724,0 1.199,5.715,0 1.181,5.705,0 1.163,5.696,0 1.145,5.686,0 1.128,5.676,0 1.11,5.665,0 1.093,5.654,0 1.076,5.643,0 1.059,5.632,0 1.042,5.62,0 1.025,5.608,0 1.009,5.596,0 0.993,5.583,0 0.977,5.57,0 0.962,5.557,0 0.946,5.543,0 0.931,5.53,0 0.916,5.516,0 0.901,5.502,0 0.887,5.487,0 0.873,5.473,0 0.859,5.458,0 0.845,5.442,0 0.832,5.427,0 0.819,5.411,0 0.806,5.395,0 0.793,5.379,0 0.781,5.363,0 0.769,5.346,0 0.757,5.33,0 0.746,5.313,0 0.735,5.296,0 0.724,5.278,0 0.713,5.261,0 0.703,5.243,0 0.693,5.225,0 0.684,5.207,0 0.674,5.189,0 0.666,5.171,0 0.657,5.152,0 0.649,5.133,0 0.641,5.115,0 0.633,5.096,0 0.626,5.077,0 0.619,5.057,0 0.612,5.038,0 0.606,5.019,0 0.6,4.999,0 0.594,4.979,0 0.589,4.96,0 0.584,4.94,0 0.579,4.92,0 0.575,4.9,0 0.571,4.88,0 0.568,4.86,0 0.564,4.84,0 0.562,4.819,0 0.559,4.799,0 0.557,4.779,0 0.555,4.759,0 0.554,4.738,0 0.553,4.718,0 0.552,4.697,0 0.552,4.677,0 0.552,4.656,0 0.552,4.636,0 0.553,4.616,0 0.554,4.595,0 0.555,4.575,0 0.557,4.554,0 0.559,4.534,0 0.562,4.514,0 0.564,4.494,0 0.568,4.473,0 0.571,4.453,0 0.575,4.433,0 0.579,4.413,0 0.584,4.393,0 0.589,4.374,0 0.594,4.354,0 0.6,4.334,0 0.606,4.315,0 0.612,4.295,0 0.619,4.276,0 0.626,4.257,0 0.633,4.238,0 0.641,4.219,0 0.649,4.2,0 0.657,4.181,0 0.666,4.163,0 0.674,4.144,0 0.684,4.126,0 0.693,4.108,0 0.703,4.09,0 0.713,4.073,0 0.724,4.055,0 0.735,4.038,0 0.746,4.021,0 0.757,4.004,0 0.769,3.987,0 0.781,3.97,0 0.793,3.954,0 0.806,3.938,0 0.819,3.922,0 0.832,3.906,0 0.845,3.891,0 0.859,3.876,0 0.873,3.861,0 0.887,3.846,0 0.901,3.832,0 0.916,3.817,0 0.931,3.804,0 0.946,3.79,0 0.962,3.776,0 0.977,3.763,0 0.993,3.75,0 1.009,3.738,0 1.025,3.726,0 1.042,3.713,0 1.059,3.702,0 1.076,3.69,0 1.093,3.679,0 1.11,3.668,0 1.128,3.658,0 1.145,3.648,0 1.163,3.638,0 1.181,3.628,0 1.199,3.619,0 1.218,3.61,0 1.236,3.601,0 1.255,3.593,0 1.274,3.585,0 1.293,3.577,0 1.312,3.57,0 1.331,3.563,0 1.35,3.556,0 1.37,3.55,0 1.389,3.544,0 1.409,3.538,0 1.428,3.533,0 1.448,3.528,0 1.468,3.523,0 1.488,3.519,0 1.508,3.515,0 1.528,3.511,0 1.548,3.508,0 1.569,3.505,0 1.589,3.503,0 1.609,3.501,0 1.63,3.499,0 1.65,3.497,0 1.67,3.496,0 1.691,3.496,0 1.711,3.495,0 1.732,3.495,0 1.752,3.496,0 1.773,3.496,0 1.793,3.497,0 1.813,3.499,0 1.834,3.5,0 1.854,3.503,0 1.874,3.505,0 1.894,3.508,0 1.915,3.511,0 1.935,3.514,0 1.955,3.518,0 1.975,3.523,0 1.995,3.527,0 2.015,3.532,0 2.034,3.537,0 2.054,3.543,0 2.074,3.549,0 2.093,3.555,0 2.112,3.562,0 2.131,3.569,0 2.151,3.576,0 2.17,3.584,0 2.188,3.592,0 2.207,3.6,0 2.226,3.608,0 2.244,3.617,0 2.262,3.627,0 2.28,3.636,0 2.298,3.646,0 2.316,3.656,0 2.333,3.667,0&lt;/coordinates&gt;&lt;/LineString&gt;&lt;LineString&gt;&lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;&lt;coordinates&gt;9,4.111,0 8.966,4.178,0 8.932,4.244,0 8.896,4.309,0 8.859,4.374,0 8.821,4.438,0 8.782,4.502,0 8.742,4.565,0 8.7,4.627,0 8.658,4.688,0 8.614,4.749,0 8.57,4.809,0 8.524,4.868,0 8.477,4.926,0 8.43,4.983,0 8.381,5.04,0 8.331,5.096,0 8.281,5.151,0 8.229,5.205,0 8.177,5.258,0 8.124,5.31,0 8.069,5.361,0 8.014,5.411,0 7.958,5.461,0 7.901,5.509,0 7.844,5.556,0 7.785,5.603,0 7.726,5.648,0 7.666,5.692,0 7.605,5.735,0 7.543,5.777,0 7.481,5.818,0 7.418,5.858,0 7.354,5.897,0 7.29,5.935,0 7.225,5.971,0 7.159,6.007,0 7.093,6.041,0 7.026,6.074,0 6.958,6.106,0 6.89,6.137,0 6.822,6.167,0 6.753,6.195,0 6.683,6.222,0 6.613,6.248,0 6.543,6.273,0 6.472,6.296,0 6.401,6.319,0 6.329,6.34,0 6.257,6.36,0 6.185,6.378,0 6.112,6.395,0 6.04,6.411,0 5.966,6.426,0 5.893,6.44,0 5.819,6.452,0 5.746,6.463,0 5.672,6.472,0 5.597,6.48,0 5.523,6.487,0 5.449,6.493,0 5.374,6.498,0 5.3,6.501,0 5.225,6.503,0 5.15,6.503,0 5.076,6.502,0 5.001,6.5,0 4.927,6.497,0 4.852,6.492,0 4.778,6.486,0 4.704,6.479,0 4.629,6.47,0 4.555,6.46,0 4.482,6.449,0 4.408,6.437,0 4.335,6.423,0 4.262,6.408,0 4.189,6.392,0 4.116,6.374,0 4.044,6.355,0 3.972,6.335,0 3.901,6.314,0 3.83,6.292,0 3.759,6.268,0 3.688,6.243,0 3.619,6.217,0 3.549,6.189,0 3.48,6.16,0 3.412,6.131,0 3.344,6.1,0 3.277,6.067,0 3.21,6.034,0 3.144,5.999,0 3.078,5.964,0 3.013,5.927,0 2.949,5.889,0 2.886,5.85,0 2.823,5.81,0 2.761,5.768,0 2.699,5.726,0 2.638,5.683,0 2.578,5.638,0 2.519,5.593,0 2.461,5.546,0 2.403,5.499,0 2.347,5.45,0 2.291,5.401,0 2.236,5.35,0 2.182,5.299,0 2.129,5.246,0 2.076,5.193,0 2.025,5.139,0 1.975,5.084,0 1.925,5.028,0 1.877,4.971,0 1.829,4.914,0 1.783,4.855,0 1.738,4.796,0 1.693,4.736,0 1.65,4.675,0 1.608,4.614,0 1.567,4.551,0 1.527,4.488,0 1.488,4.425,0 1.45,4.36,0 1.413,4.295,0 1.378,4.23,0 1.343,4.164,0 1.31,4.097,0 1.278,4.029,0 1.247,3.961,0 1.217,3.893,0 1.189,3.824,0 1.161,3.755,0 1.135,3.685,0 1.11,3.614,0 1.087,3.544,0 1.064,3.472,0 1.043,3.401,0 1.023,3.329,0 1.004,3.257,0 0.987,3.184,0 0.971,3.111,0 0.956,3.038,0 0.942,2.965,0 0.93,2.891,0 0.919,2.817,0 0.909,2.743,0 0.901,2.669,0 0.894,2.595,0 0.888,2.52,0 0.883,2.446,0 0.88,2.371,0 0.878,2.297,0 0.878,2.222,0 0.878,2.148,0 0.88,2.073,0 0.883,1.998,0 0.888,1.924,0 0.894,1.85,0 0.901,1.775,0 0.909,1.701,0 0.919,1.627,0 0.93,1.553,0 0.942,1.48,0 0.956,1.406,0 0.971,1.333,0 0.987,1.26,0 1.004,1.188,0 1.023,1.116,0 1.043,1.044,0 1.064,0.972,0 1.087,0.901,0 1.11,0.83,0 1.135,0.76,0 1.161,0.69,0 1.189,0.62,0 1.217,0.551,0 1.247,0.483,0 1.278,0.415,0 1.31,0.348,0 1.343,0.281,0 1.378,0.215,0 1.413,0.149,0 1.45,0.084,0 1.488,0.02,0 1.527,-0.044,0 1.567,-0.107,0 1.608,-0.169,0 1.65,-0.231,0 1.693,-0.291,0 1.738,-0.351,0 1.783,-0.411,0 1.829,-0.469,0 1.877,-0.527,0 1.925,-0.584,0 1.975,-0.639,0 2.025,-0.694,0 2.076,-0.749,0 2.129,-0.802,0 2.182,-0.854,0 2.236,-0.906,0 2.291,-0.956,0 2.347,-1.006,0 2.403,-1.054,0 2.461,-1.102,0 2.519,-1.148,0 2.578,-1.194,0 2.638,-1.238,0 2.699,-1.282,0 2.761,-1.324,0 2.823,-1.365,0 2.886,-1.405,0 2.949,-1.444,0 3.013,-1.482,0 3.078,-1.519,0 3.144,-1.555,0 3.21,-1.589,0 3.277,-1.623,0 3.344,-1.655,0 3.412,-1.686,0 3.48,-1.716,0 3.549,-1.745,0 3.619,-1.772,0 3.688,-1.798,0 3.759,-1.823,0 3.83,-1.847,0 3.901,-1.87,0 3.972,-1.891,0 4.044,-1.911,0 4.116,-1.93,0 4.189,-1.947,0 4.262,-1.964,0 4.335,-1.979,0 4.408,-1.992,0 4.482,-2.005,0 4.555,-2.016,0 4.629,-2.026,0 4.704,-2.034,0 4.778,-2.042,0 4.852,-2.048,0 4.927,-2.052,0 5.001,-2.056,0 5.076,-2.058,0 5.15,-2.059,0 5.225,-2.058,0 5.3,-2.056,0 5.374,-2.053,0 5.449,-2.049,0 5.523,-2.043,0 5.597,-2.036,0 5.672,-2.028,0 5.746,-2.018,0 5.819,-2.007,0 5.893,-1.995,0 5.966,-1.982,0 6.04,-1.967,0 6.112,-1.951,0 6.185,-1.934,0 6.257,-1.915,0 6.329,-1.895,0 6.401,-1.874,0 6.472,-1.852,0 6.543,-1.829,0 6.613,-1.804,0 6.683,-1.778,0 6.753,-1.751,0 6.822,-1.722,0 6.89,-1.693,0 6.958,-1.662,0 7.026,-1.63,0 7.093,-1.597,0 7.159,-1.562,0 7.225,-1.527,0 7.29,-1.49,0 7.354,-1.453,0 7.418,-1.414,0 7.481,-1.374,0 7.543,-1.333,0 7.605,-1.291,0 7.666,-1.248,0 7.726,-1.203,0 7.785,-1.158,0 7.844,-1.112,0 7.901,-1.065,0 7.958,-1.016,0 8.014,-0.967,0 8.069,-0.917,0 8.124,-0.865,0 8.177,-0.813,0 8.229,-0.76,0 8.281,-0.706,0 8.331,-0.651,0 8.381,-0.596,0 8.43,-0.539,0 8.477,-0.482,0 8.524,-0.423,0 8.57,-0.364,0 8.614,-0.304,0 8.658,-0.244,0 8.7,-0.182,0 8.742,-0.12,0 8.782,-0.057,0 8.821,0.006,0 8.859,0.07,0 8.896,0.135,0 8.932,0.201,0 8.966,0.267,0 9,0.333,0&lt;/coordinates&gt;&lt;/LineString&gt;&lt;/MultiGeometry&gt;&quot; ) );</span></a>
<a name="494"><span class="lineNum">     494 </span>                :<span class="lineCov">          1 :   QCOMPARE( exportFloat.asKml( 3 ), expectedKmlPrec3 );</span></a>
<a name="495"><span class="lineNum">     495 </span>                :            : </a>
<a name="496"><span class="lineNum">     496 </span>                :            :   // insert geometry</a>
<a name="497"><span class="lineNum">     497 </span>                :<span class="lineCov">          1 :   QgsMultiCurve rc;</span></a>
<a name="498"><span class="lineNum">     498 </span>                :<span class="lineCov">          1 :   rc.clear();</span></a>
<a name="499"><span class="lineNum">     499 </span>                :<span class="lineCov">          1 :   rc.insertGeometry( nullptr, 0 );</span></a>
<a name="500"><span class="lineNum">     500 </span>                :<span class="lineCov">          1 :   QVERIFY( rc.isEmpty() );</span></a>
<a name="501"><span class="lineNum">     501 </span>                :<span class="lineCov">          1 :   QCOMPARE( rc.numGeometries(), 0 );</span></a>
<a name="502"><span class="lineNum">     502 </span>                :<span class="lineCov">          1 :   rc.insertGeometry( nullptr, -1 );</span></a>
<a name="503"><span class="lineNum">     503 </span>                :<span class="lineCov">          1 :   QVERIFY( rc.isEmpty() );</span></a>
<a name="504"><span class="lineNum">     504 </span>                :<span class="lineCov">          1 :   QCOMPARE( rc.numGeometries(), 0 );</span></a>
<a name="505"><span class="lineNum">     505 </span>                :<span class="lineCov">          1 :   rc.insertGeometry( nullptr, 100 );</span></a>
<a name="506"><span class="lineNum">     506 </span>                :<span class="lineCov">          1 :   QVERIFY( rc.isEmpty() );</span></a>
<a name="507"><span class="lineNum">     507 </span>                :<span class="lineCov">          1 :   QCOMPARE( rc.numGeometries(), 0 );</span></a>
<a name="508"><span class="lineNum">     508 </span>                :            : </a>
<a name="509"><span class="lineNum">     509 </span>                :<span class="lineCov">          1 :   rc.insertGeometry( new QgsPoint(), 0 );</span></a>
<a name="510"><span class="lineNum">     510 </span>                :<span class="lineCov">          1 :   QVERIFY( rc.isEmpty() );</span></a>
<a name="511"><span class="lineNum">     511 </span>                :<span class="lineCov">          1 :   QCOMPARE( rc.numGeometries(), 0 );</span></a>
<a name="512"><span class="lineNum">     512 </span>                :            : </a>
<a name="513"><span class="lineNum">     513 </span>                :<span class="lineCov">          1 :   rc.insertGeometry( part.clone(), 0 );</span></a>
<a name="514"><span class="lineNum">     514 </span>                :<span class="lineCov">          1 :   QVERIFY( !rc.isEmpty() );</span></a>
<a name="515"><span class="lineNum">     515 </span>                :<span class="lineCov">          1 :   QCOMPARE( rc.numGeometries(), 1 );</span></a>
<a name="516"><span class="lineNum">     516 </span>                :            : </a>
<a name="517"><span class="lineNum">     517 </span>                :            :   // cast</a>
<a name="518"><span class="lineNum">     518 </span>                :<span class="lineCov">          1 :   QVERIFY( !QgsMultiCurve().cast( nullptr ) );</span></a>
<a name="519"><span class="lineNum">     519 </span>                :<span class="lineCov">          1 :   QgsMultiCurve pCast;</span></a>
<a name="520"><span class="lineNum">     520 </span>                :<span class="lineCov">          1 :   QVERIFY( QgsMultiCurve().cast( &amp;pCast ) );</span></a>
<a name="521"><span class="lineNum">     521 </span>                :<span class="lineCov">          1 :   QgsMultiCurve pCast2;</span></a>
<a name="522"><span class="lineNum">     522 </span>                :<span class="lineCov">          2 :   pCast2.fromWkt( QStringLiteral( &quot;MultiCurveZ()&quot; ) );</span></a>
<a name="523"><span class="lineNum">     523 </span>                :<span class="lineCov">          1 :   QVERIFY( QgsMultiCurve().cast( &amp;pCast2 ) );</span></a>
<a name="524"><span class="lineNum">     524 </span>                :<span class="lineCov">          2 :   pCast2.fromWkt( QStringLiteral( &quot;MultiCurveM()&quot; ) );</span></a>
<a name="525"><span class="lineNum">     525 </span>                :<span class="lineCov">          1 :   QVERIFY( QgsMultiCurve().cast( &amp;pCast2 ) );</span></a>
<a name="526"><span class="lineNum">     526 </span>                :<span class="lineCov">          2 :   pCast2.fromWkt( QStringLiteral( &quot;MultiCurveZM()&quot; ) );</span></a>
<a name="527"><span class="lineNum">     527 </span>                :<span class="lineCov">          1 :   QVERIFY( QgsMultiCurve().cast( &amp;pCast2 ) );</span></a>
<a name="528"><span class="lineNum">     528 </span>                :            : </a>
<a name="529"><span class="lineNum">     529 </span>                :            :   //boundary</a>
<a name="530"><span class="lineNum">     530 </span>                :<span class="lineCov">          1 :   QgsMultiCurve multiLine1;</span></a>
<a name="531"><span class="lineNum">     531 </span>                :<span class="lineCov">          1 :   QVERIFY( !multiLine1.boundary() );</span></a>
<a name="532"><span class="lineNum">     532 </span>                :<span class="lineCov">          1 :   QgsCircularString boundaryLine1;</span></a>
<a name="533"><span class="lineNum">     533 </span>                :<span class="lineCov">          1 :   boundaryLine1.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 0, 0 ) &lt;&lt; QgsPoint( 1, 0 ) &lt;&lt; QgsPoint( 1, 1 ) );</span></a>
<a name="534"><span class="lineNum">     534 </span>                :<span class="lineCov">          1 :   multiLine1.addGeometry( boundaryLine1.clone() );</span></a>
<a name="535"><span class="lineNum">     535 </span>                :<span class="lineCov">          1 :   QgsAbstractGeometry *boundary = multiLine1.boundary();</span></a>
<a name="536"><span class="lineNum">     536 </span>                :<span class="lineCov">          1 :   QgsMultiPoint *mpBoundary = dynamic_cast&lt; QgsMultiPoint * &gt;( boundary );</span></a>
<a name="537"><span class="lineNum">     537 </span>                :<span class="lineCov">          1 :   QVERIFY( mpBoundary );</span></a>
<a name="538"><span class="lineNum">     538 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;numGeometries(), 2 );</span></a>
<a name="539"><span class="lineNum">     539 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;x(), 0.0 );</span></a>
<a name="540"><span class="lineNum">     540 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;y(), 0.0 );</span></a>
<a name="541"><span class="lineNum">     541 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;x(), 1.0 );</span></a>
<a name="542"><span class="lineNum">     542 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;y(), 1.0 );</span></a>
<a name="543"><span class="lineNum">     543 </span>                :<span class="lineCov">          1 :   delete boundary;</span></a>
<a name="544"><span class="lineNum">     544 </span>                :            :   // add another QgsCircularString</a>
<a name="545"><span class="lineNum">     545 </span>                :<span class="lineCov">          1 :   QgsCircularString boundaryLine2;</span></a>
<a name="546"><span class="lineNum">     546 </span>                :<span class="lineCov">          1 :   boundaryLine2.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 10, 10 ) &lt;&lt; QgsPoint( 11, 10 ) &lt;&lt; QgsPoint( 11, 11 ) );</span></a>
<a name="547"><span class="lineNum">     547 </span>                :<span class="lineCov">          1 :   multiLine1.addGeometry( boundaryLine2.clone() );</span></a>
<a name="548"><span class="lineNum">     548 </span>                :<span class="lineCov">          1 :   boundary = multiLine1.boundary();</span></a>
<a name="549"><span class="lineNum">     549 </span>                :<span class="lineCov">          1 :   mpBoundary = dynamic_cast&lt; QgsMultiPoint * &gt;( boundary );</span></a>
<a name="550"><span class="lineNum">     550 </span>                :<span class="lineCov">          1 :   QVERIFY( mpBoundary );</span></a>
<a name="551"><span class="lineNum">     551 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;numGeometries(), 4 );</span></a>
<a name="552"><span class="lineNum">     552 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;x(), 0.0 );</span></a>
<a name="553"><span class="lineNum">     553 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;y(), 0.0 );</span></a>
<a name="554"><span class="lineNum">     554 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;x(), 1.0 );</span></a>
<a name="555"><span class="lineNum">     555 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;y(), 1.0 );</span></a>
<a name="556"><span class="lineNum">     556 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 2 ) )-&gt;x(), 10.0 );</span></a>
<a name="557"><span class="lineNum">     557 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 2 ) )-&gt;y(), 10.0 );</span></a>
<a name="558"><span class="lineNum">     558 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 3 ) )-&gt;x(), 11.0 );</span></a>
<a name="559"><span class="lineNum">     559 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 3 ) )-&gt;y(), 11.0 );</span></a>
<a name="560"><span class="lineNum">     560 </span>                :<span class="lineCov">          1 :   delete boundary;</span></a>
<a name="561"><span class="lineNum">     561 </span>                :            : </a>
<a name="562"><span class="lineNum">     562 </span>                :            :   // add a closed string = no boundary</a>
<a name="563"><span class="lineNum">     563 </span>                :<span class="lineCov">          1 :   QgsCircularString boundaryLine3;</span></a>
<a name="564"><span class="lineNum">     564 </span>                :<span class="lineCov">          1 :   boundaryLine3.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 20, 20 ) &lt;&lt; QgsPoint( 21, 20 ) &lt;&lt;  QgsPoint( 20, 20 ) );</span></a>
<a name="565"><span class="lineNum">     565 </span>                :<span class="lineCov">          1 :   multiLine1.addGeometry( boundaryLine3.clone() );</span></a>
<a name="566"><span class="lineNum">     566 </span>                :<span class="lineCov">          1 :   boundary = multiLine1.boundary();</span></a>
<a name="567"><span class="lineNum">     567 </span>                :<span class="lineCov">          1 :   mpBoundary = dynamic_cast&lt; QgsMultiPoint * &gt;( boundary );</span></a>
<a name="568"><span class="lineNum">     568 </span>                :<span class="lineCov">          1 :   QVERIFY( mpBoundary );</span></a>
<a name="569"><span class="lineNum">     569 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;numGeometries(), 4 );</span></a>
<a name="570"><span class="lineNum">     570 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;x(), 0.0 );</span></a>
<a name="571"><span class="lineNum">     571 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;y(), 0.0 );</span></a>
<a name="572"><span class="lineNum">     572 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;x(), 1.0 );</span></a>
<a name="573"><span class="lineNum">     573 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;y(), 1.0 );</span></a>
<a name="574"><span class="lineNum">     574 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 2 ) )-&gt;x(), 10.0 );</span></a>
<a name="575"><span class="lineNum">     575 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 2 ) )-&gt;y(), 10.0 );</span></a>
<a name="576"><span class="lineNum">     576 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 3 ) )-&gt;x(), 11.0 );</span></a>
<a name="577"><span class="lineNum">     577 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 3 ) )-&gt;y(), 11.0 );</span></a>
<a name="578"><span class="lineNum">     578 </span>                :<span class="lineCov">          1 :   delete boundary;</span></a>
<a name="579"><span class="lineNum">     579 </span>                :            : </a>
<a name="580"><span class="lineNum">     580 </span>                :            :   //boundary with z</a>
<a name="581"><span class="lineNum">     581 </span>                :<span class="lineCov">          1 :   QgsCircularString boundaryLine4;</span></a>
<a name="582"><span class="lineNum">     582 </span>                :<span class="lineCov">          1 :   boundaryLine4.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 0, 0, 10 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 1, 0, 15 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 1, 1, 20 ) );</span></a>
<a name="583"><span class="lineNum">     583 </span>                :<span class="lineCov">          1 :   QgsCircularString boundaryLine5;</span></a>
<a name="584"><span class="lineNum">     584 </span>                :<span class="lineCov">          1 :   boundaryLine5.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 10, 10, 100 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 10, 20, 150 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZ, 20, 20, 200 ) );</span></a>
<a name="585"><span class="lineNum">     585 </span>                :<span class="lineCov">          1 :   QgsMultiCurve multiLine2;</span></a>
<a name="586"><span class="lineNum">     586 </span>                :<span class="lineCov">          1 :   multiLine2.addGeometry( boundaryLine4.clone() );</span></a>
<a name="587"><span class="lineNum">     587 </span>                :<span class="lineCov">          1 :   multiLine2.addGeometry( boundaryLine5.clone() );</span></a>
<a name="588"><span class="lineNum">     588 </span>                :            : </a>
<a name="589"><span class="lineNum">     589 </span>                :<span class="lineCov">          1 :   boundary = multiLine2.boundary();</span></a>
<a name="590"><span class="lineNum">     590 </span>                :<span class="lineCov">          1 :   mpBoundary = dynamic_cast&lt; QgsMultiPoint * &gt;( boundary );</span></a>
<a name="591"><span class="lineNum">     591 </span>                :<span class="lineCov">          1 :   QVERIFY( mpBoundary );</span></a>
<a name="592"><span class="lineNum">     592 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;numGeometries(), 4 );</span></a>
<a name="593"><span class="lineNum">     593 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;geometryN( 0 )-&gt;wkbType(), QgsWkbTypes::PointZ );</span></a>
<a name="594"><span class="lineNum">     594 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;x(), 0.0 );</span></a>
<a name="595"><span class="lineNum">     595 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;y(), 0.0 );</span></a>
<a name="596"><span class="lineNum">     596 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 0 ) )-&gt;z(), 10.0 );</span></a>
<a name="597"><span class="lineNum">     597 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;geometryN( 1 )-&gt;wkbType(), QgsWkbTypes::PointZ );</span></a>
<a name="598"><span class="lineNum">     598 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;x(), 1.0 );</span></a>
<a name="599"><span class="lineNum">     599 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;y(), 1.0 );</span></a>
<a name="600"><span class="lineNum">     600 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 1 ) )-&gt;z(), 20.0 );</span></a>
<a name="601"><span class="lineNum">     601 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;geometryN( 2 )-&gt;wkbType(), QgsWkbTypes::PointZ );</span></a>
<a name="602"><span class="lineNum">     602 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 2 ) )-&gt;x(), 10.0 );</span></a>
<a name="603"><span class="lineNum">     603 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 2 ) )-&gt;y(), 10.0 );</span></a>
<a name="604"><span class="lineNum">     604 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 2 ) )-&gt;z(), 100.0 );</span></a>
<a name="605"><span class="lineNum">     605 </span>                :<span class="lineCov">          1 :   QCOMPARE( mpBoundary-&gt;geometryN( 3 )-&gt;wkbType(), QgsWkbTypes::PointZ );</span></a>
<a name="606"><span class="lineNum">     606 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 3 ) )-&gt;x(), 20.0 );</span></a>
<a name="607"><span class="lineNum">     607 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 3 ) )-&gt;y(), 20.0 );</span></a>
<a name="608"><span class="lineNum">     608 </span>                :<span class="lineCov">          1 :   QCOMPARE( static_cast&lt; QgsPoint *&gt;( mpBoundary-&gt;geometryN( 3 ) )-&gt;z(), 200.0 );</span></a>
<a name="609"><span class="lineNum">     609 </span>                :<span class="lineCov">          1 :   delete boundary;</span></a>
<a name="610"><span class="lineNum">     610 </span>                :            : </a>
<a name="611"><span class="lineNum">     611 </span>                :            :   //reversed</a>
<a name="612"><span class="lineNum">     612 </span>                :<span class="lineCov">          1 :   QgsMultiCurve cR;</span></a>
<a name="613"><span class="lineNum">     613 </span>                :<span class="lineCov">          1 :   std::unique_ptr&lt; QgsMultiCurve &gt; reversed( cR.reversed() );</span></a>
<a name="614"><span class="lineNum">     614 </span>                :<span class="lineCov">          1 :   QVERIFY( reversed-&gt;isEmpty() );</span></a>
<a name="615"><span class="lineNum">     615 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 7, 17, 4, 1 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 3, 13, 1, 4 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 7, 11, 2, 8 ) ) ;</span></a>
<a name="616"><span class="lineNum">     616 </span>                :<span class="lineCov">          1 :   cR.addGeometry( part.clone() );</span></a>
<a name="617"><span class="lineNum">     617 </span>                :<span class="lineCov">          1 :   part.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 27, 37, 6, 2 ) &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 43, 43, 11, 5 )  &lt;&lt; QgsPoint( QgsWkbTypes::PointZM, 27, 53, 21, 52 ) ) ;</span></a>
<a name="618"><span class="lineNum">     618 </span>                :<span class="lineCov">          1 :   cR.addGeometry( part.clone() );</span></a>
<a name="619"><span class="lineNum">     619 </span>                :<span class="lineCov">          1 :   reversed.reset( cR.reversed() );</span></a>
<a name="620"><span class="lineNum">     620 </span>                :<span class="lineCov">          1 :   QVERIFY( !reversed-&gt;isEmpty() );</span></a>
<a name="621"><span class="lineNum">     621 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( reversed-&gt;geometryN( 0 ) );</span></a>
<a name="622"><span class="lineNum">     622 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointZM, 7, 11, 2, 8 ) );</span></a>
<a name="623"><span class="lineNum">     623 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointZM, 3, 13, 1, 4 ) );</span></a>
<a name="624"><span class="lineNum">     624 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointZM, 7, 17, 4, 1 ) );</span></a>
<a name="625"><span class="lineNum">     625 </span>                :<span class="lineCov">          1 :   ls = static_cast&lt; const QgsCircularString * &gt;( reversed-&gt;geometryN( 1 ) );</span></a>
<a name="626"><span class="lineNum">     626 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 0 ), QgsPoint( QgsWkbTypes::PointZM, 27, 53, 21, 52 ) );</span></a>
<a name="627"><span class="lineNum">     627 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 1 ), QgsPoint( QgsWkbTypes::PointZM, 43, 43, 11, 5 ) );</span></a>
<a name="628"><span class="lineNum">     628 </span>                :<span class="lineCov">          1 :   QCOMPARE( ls-&gt;pointN( 2 ), QgsPoint( QgsWkbTypes::PointZM, 27, 37, 6, 2 ) );</span></a>
<a name="629"><span class="lineNum">     629 </span>                :            : </a>
<a name="630"><span class="lineNum">     630 </span>                :            :   // segmentize</a>
<a name="631"><span class="lineNum">     631 </span>                :<span class="lineCov">          1 :   QgsMultiCurve multiCurve2;</span></a>
<a name="632"><span class="lineNum">     632 </span>                :<span class="lineCov">          1 :   QgsCompoundCurve compoundCurve2;</span></a>
<a name="633"><span class="lineNum">     633 </span>                :<span class="lineCov">          1 :   QgsCircularString circularString2;</span></a>
<a name="634"><span class="lineNum">     634 </span>                :<span class="lineCov">          1 :   circularString2.setPoints( QgsPointSequence() &lt;&lt; QgsPoint( 1, 2 ) &lt;&lt; QgsPoint( 11, 10 ) &lt;&lt; QgsPoint( 21, 2 ) );</span></a>
<a name="635"><span class="lineNum">     635 </span>                :<span class="lineCov">          1 :   compoundCurve2.addCurve( circularString2.clone() );</span></a>
<a name="636"><span class="lineNum">     636 </span>                :<span class="lineCov">          1 :   multiCurve2.addGeometry( compoundCurve2.clone() );</span></a>
<a name="637"><span class="lineNum">     637 </span>                :<span class="lineCov">          1 :   QgsMultiLineString *segmentized2 = static_cast&lt;QgsMultiLineString *&gt;( multiCurve2.segmentize() );</span></a>
<a name="638"><span class="lineNum">     638 </span>                :<span class="lineCov">          1 :   QCOMPARE( segmentized2-&gt;vertexCount(), 156 );</span></a>
<a name="639"><span class="lineNum">     639 </span>                :<span class="lineCov">          1 :   QCOMPARE( segmentized2-&gt;partCount(), 1 );</span></a>
<a name="640"><span class="lineNum">     640 </span>                :<span class="lineCov">          1 :   QVERIFY( !segmentized2-&gt;is3D() );</span></a>
<a name="641"><span class="lineNum">     641 </span>                :<span class="lineCov">          1 :   QVERIFY( !segmentized2-&gt;isMeasure() );</span></a>
<a name="642"><span class="lineNum">     642 </span>                :<span class="lineCov">          1 :   QCOMPARE( segmentized2-&gt;wkbType(),  QgsWkbTypes::Type::MultiLineString );</span></a>
<a name="643"><span class="lineNum">     643 </span>                :<span class="lineCov">          1 : }</span></a>
<a name="644"><span class="lineNum">     644 </span>                :            : </a>
<a name="645"><span class="lineNum">     645 </span>                :            : </a>
<a name="646"><span class="lineNum">     646 </span>                :<span class="lineCov">          1 : QGSTEST_MAIN( TestQgsMultiCurve )</span></a>
<a name="647"><span class="lineNum">     647 </span>                :            : #include &quot;testqgsmulticurve.moc&quot;</a>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.15</a></td></tr>
  </table>
  <br>

</body>
</html>
